
--- Page 1 ---
UCIe Specification Revision 2.0, Version 1.0 97
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.0 Logical Physical Layer
The Logical PHY comprehends the following functions:
• Link initialization, training and power management states
• Byte to Lane mapping for data transmission over Lanes• Interconnect redundancy remapping (when required)
• Transmitting and receiving sideband messages
• Scrambling and training pattern generation• Lane reversal
• Width degradation (when applicable)
4.1 Data and Sideband Transmission Flow
This specification defines clock, valid and Data to send and receive data over the physical Lanes. The 
transmitted data is framed by the valid signal.
4.1.1 Byte to Lane Mapping
Data packets are transmitted in Bytes. Within  each Byte, bit [0] is transmitted first. Figure 4-1  shows 
an example of bit arrangement within one byte transmission over Lane 0.
Each Byte is transmitted on a separate Lane. Byte 0 (B0) is transmitted on Lane 0, Byte 1 is 
transmitted on Lane 1 and so on.
Figure 4-2  shows an example of a 256B Flit transmi tted over a x64 interface (one x64 Advanced 
Package module or two x32 Advanced Package module s or four Standard Package modules). If the I/
O width changes to x32 or x16 interface (Standard Package), transmission of one Byte per Lane is 
preserved as shown in Figure 4-3  and Figure 4-4  respectively.
Figure 4-5  shows an example for a width degraded Standard Package module.Figure 4-1. Bit arrangement within a byte transfer
 8 UIClock
Valid
Data B0[0] B0[1] B0[4] B0[2] B0[3] B0[5] B0[6] B0[7]
--- Page 2 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 98
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Figure 4-2. Byte map for x64 interface
Figure 4-3. Byte map for x32 interface
Figure 4-4. Byte map for x16 interfaceUI    LANE0 1 2 3 4 5 6 7 … 4 84 95 05 15 25 35 45 55 65 75 85 96 06 16 26 3
0 - 7 B00 B01 B02 B03 B04 B05 B06 B07 …B48 B49 B50 B51 B52 B53 B54 B55 B56 B57 B58 B59 B60 B61 B62 B63
8 - 15 B64 B65 B66 B67 B68 B69 B70 B71 …B112 B113 B114 B115 B116 B117 B118 B119 B120 B121 B122 B123 B124 B125 B126 B127
16 - 23 B128 B129 B130 B131 B132 B133 B134 B135 …B176 B177 B178 B179 B180 B181 B182 B183 B184 B185 B186 B187 B188 B189 B190 B191
24 - 31 B192 B193 B194 B195 B196 B197 B198 B199 …B240 B241 B242 B243 B244 B245 B246 B247 B248 B249 B250 B251 B252 B253 B254 B255

--- Page 3 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 99
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.1.2 Valid Framing
Valid signal is used to frame the transmitted data. For each 8-bit data packet, valid is asserted for the 
first 4 UI and de-asserted for 4 UI. This will allow data transfer in Raw Format or various Flit Formats as described in Chapter 3.0  using one or multiple valid frames. An example is shown in Figure 4-6  
where Transfer 1 and Transfer 2 can be from the same Flit or different Flits.
Note: An 8-UI block assertion is enforced by the Transmitter and tracked by the Receiver 
during Active state. This means that following the first valid transfer of data over mainband in Active state, each subsequent tr ansfer is after an integer multiple of 8 UI 
from the rising edge of Valid of the first transfer. Note that for Retimers, this means 
that the first transfer after entering the Active state cannot be a ‘No Flit data transfer + 
1 credit release’ encoding; this is acceptable because the Retimer-advertised credits are replenished or readvertised whenev er the state moves away from Active.Figure 4-5. Byte to Lane mapping for Standard package x16 degraded to x8

--- Page 4 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 100
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.1.2.1 Valid Framing for Retimers
The UCIe Retimer releases credits to its local UCIe die using the Valid wire, as described in Table 4-1 . 
Each credit tracks 256 Bytes of data (including  any FEC, CRC, etc). The Valid Framing encodings 
ensure triple bit flip detection guarantee. It is  permitted for receiver implementations to trigger 
Retrain on any bit error (using triple bit flip dete ction guarantee). It is also permitted for receiver 
implementations to use the encodings below to correct single bit errors (with the understanding that 
three bit error detection is lost, and its contribution to overall FIT is negligible).
4.1.3 Clock Gating
Forwarded mainband clocks on the UCIe Link must be gated when Valid signal is low after providing 
fixed 16 UI (8 cycles) of postamble clock for half-rate clocking and 32 UI (8 cycles) of postamble clock for quarter-rate clocking, unless free running clock mode is negotiated or Runtime Recalibration has 
been requested by the remote Link partner. Data and Clock signal parking levels when clocks are 
gated are described in Section 5.11 .
Note that the clock postamble is required any time that the clock can toggle with Valid assertion, and 
the clock needs to stop toggling, regardless of LTSM state.Figure 4-6. Valid framing example
Table 4-1. Valid framing for Retimers
8-UI Valida
a. Note that the bits above are transmitted on the Link in or der from right to left (i.e., bit 0 is transmitted on the
Link first, followed by bit 1 and so on until bit 7).Encoding
00000000b No Flit data transfer + no credit release
00001111b Flit data transfer valid + no credit release11110000b No Flit data transfer + 1 credit release
11111111b Flit data transfer valid + 1 Credit release
Figure 4-7. Clock gating 8 UI  8 UIClock
Valid
Data[N-1:0][7:0] Data  B yte  [N -1:0 ] Tra nsfer  1 Data  B yte  [N -1:0 ] Tra nsfer  2
 8 UIClock
Valid
Data[N-1:0][7:0] Data  B yte  [N -1:0 ] Tra nsfer s 
 8 UIClock Postamble Clock Gated
Parked Data LevelParked Clock LevelNormal operation
--- Page 5 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 101
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.1.4 Free Running Clock Mode
Free running clock mode is defined as the mode where the forwarded clock remains toggling even 
when the Transmitter for Valid is held low and there is no data transfer on the interface. This mode 
must be supported to allow disabling dynamic clock gating for normal operation or debug. This must 
be negotiated prior to mainband Link training through parameter exchange.
4.1.5 Sideband transmission
Each module supports a sideband interface with a serial data and clock pin pair. Sideband packet 
formats and encodings are shown in Chapter 7.0  and the electrical characteristics are shown in 
Section 5.13 .
As shown in Section 7.1.2 , the sideband message formats are defined as a 64-bit header with no 
data, with 32 bits or 64 bits of data. A 64-bit serial packet is defined on the I/O interface to the 
remote die as shown in Figure 4-8 . 32-bit data is sent using the 64-bit serial packet with MSBs 
padded with 0b. Two sideband serial packets on the I/O interface are separated by a minimum of 32 
bits low as shown in Figure 4-9 . A sideband message with data would be transferred as a 64-bit 
header followed by 32 bits of low followed by 64-bit data followed by 32 bits of low.
4.1.5.1 Sideband Performant  Mode Operation (PMO)
Sideband designs can negotiate support for ‘Sideban d Performant Mode Operation (PMO)’ by way of 
the Sideband Feature Extensions (SBFE) mechanism defined in Section 4.5.3.3.1.1 . The Sideband 
PMO bit of the {MBINIT.PARAM SBFE req/resp} sideband message (bit 1) is defined for negotiating this operation (see Table 7-11 ). When supporting this feature, a UCIe Link must support this 
capability on both its transmit and receive direction or not support the capability at all. In a multi-
module Link, all modules must advertise the same ca pability. A UCIe Link must set the Sideband PMO 
bit to 1 on the {MBINIT.PARAM SBFE resp} sideband message that the UCIe Link transmits, but only 
if the corresponding Req message also has that bit set to 1 and its receiver is capable of Sideband 
PMO. Otherwise, the Sideband PMO bit must be cleared to 0.
When Sideband PMO capability is enabled, the 32-U I dead time between the 64-UI data transfers on 
the sideband is no longer applicable and the sideba nd can transmit 64-UI data back-to-back with no 
gaps. See Figure 4-10  and Figure 4-11  for illustration. The transmitter must follow this new mode 
after the transmitter has sent and received the {MBINIT.PARAM SBFE resp} sideband message with Figure 4-8. Example 64-bit Side band Serial Packet Transfer
Figure 4-9. Sideband Packet Transmission: Back-to-Back 64 UI
SB Clock
SB Message>=32 UI
D0 D1 D62 D63

--- Page 6 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 102
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 the Sideband PMO bit set to 1, across all modules. The receiver must be ready to accept packets in 
this mode after the receiver has transmitted the {MBINIT.PARAM SBFE resp} sideband message with 
the Sideband PMO bit set to 1. After Sideband PMO is  enabled, the transmitter operates in Performant 
Mode in all states until entry into the RESET state with the SB_MGMT_UP flag cleared to 0. 
Additionally, PMO can then only be renegotiated on  a training sequence with the SB_MGMT_UP flag 
cleared to 0. Note that from a receiver perspective, due to timing differences, packets might be 
received without the Sideband Performant Mode  even after the chiplet has transmitted an 
{MBINIT.PARAM SBFE resp} sideband message with the PMO bit set to 1. The sideband receiver must 
be backward compatible and be able to handle 32 UI of gaps between consecutive 64-UI transfers 
over the sideband Link.
4.2 Lane Reversal
In Section 4.2 , Section 4.3 , and Section 4.5 , the following nomenclature is used:
•TD_P : Physical Lane for Data Transmitter
•RD_P : Physical Lane for Data Receiver
•TRD_P : Physical Lane for Redundant Data Transmitter
•RRD_P : Physical Lane for Redundant Data Receiver
•TD_L : Logical Lane for Data Transmit
•RD_L : Logical Lane for Data Receive
•TCKP_P , TCKN_P  and TTRK_P : Physical Lane for Clock and Track Transmitter
•TCKP_L , TCKN_L  and TTRK_L : Logical Lane for Clock and Track Transmitter
•RCKP_P , RCKN_P  and RTRK_P : Physical Lane for Clock and Track Receiver
•RCKP_L , RCKN_L  and RTRK_L : Logical Lane for Clock and Track Receiver
•TRDCK_P : Physical Lane for Redundant Clock/Track Transmitter
•RRDCK_P : Physical Lane for Redundant Clock/Track ReceiverFigure 4-10. Example 64-bit Sideband Serial Packet Transfer in Sideband Performant Mode
Figure 4-11. Sideband Packet Transmission: Back-to-Back in Sideband Performant Mode 64 UI
SB Clock
SB Message D0 D1 D62 D63
Sideband Packet 1 64 UI
SB Clock
SB MessageSideband Packet  2 64 UI
--- Page 7 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 103
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 •TRDCK_L : Logical Lane for Redundant Clock/Track Transmitter
•RRDCK_L : Logical Lane for Redundant Clock/Track Receiver
•TVLD_P , RVLD_P : Physical Lane for Valid Transmitter and Receiver
•TRDVLD_P , RRDVLD_P : Physical Lane for Redundant Valid Transmitter and Receiver
•TVLD_L , RVLD_L : Logical Lane for Valid Transmitter and Receiver
•TRDVLD_L , RRDVLD_L : Logical Lane for Redundant Valid Transmitter and Receiver
Devices must support Lane reversal of data Lanes within a Module. An example of Lane reversal is 
when physical Data Lane 0 on local die is connecte d to physical Data Lane (N-1) on the remote die 
(physical Data Lane 1 is connected to physical Data Lane N-2 and so on) where N = 8 for a x8 
Standard Package, N = 16 for a x16 Standard Pack age, N = 32 for a x32 Advanced Package, and N = 
64 for a x64 Advanced Package. Redundant Lanes, in  case of Advanced Package, are also reversed. 
Lane reversal must be implemented on the Transmitter only. The Transmitter reverses the logical Lane 
order on Data and Redundant Lanes.
Track, Valid, Clock, and sideband signals must not be reversed.
Lane reversal is discovered and applied during initialization and training (see Section 4.5.3.3.5 ).
4.2.1 Lane ID
To allow Lane reversal discovery, each logical Data and redundant Lane within a module is assigned a 
unique Lane ID. The assigned Lane IDs are shown in Table 4-2  and Table 4-3  for Advanced and 
Standard Package modules, respectively . Note that logical Lane numbers in Table 4-2  and Table 4-3  
represent the logical Transmitter and Receiver Lanes. For example, Logical Lane Number = 0 
represents TD_L[0]/RD_L[0]  and so on.
In Table 4-2 , for a x64 Advanced Package module, logical Lane numbers 64, 65, 66, and 67 represent 
Logical redundant Lanes TRD_L[0]/RRD_L[0] , TRD_L[1]/RRD_L[1] , TRD_L[2]/RRD_L[2] , 
TRD_L[3]/RRD_L[3] , respectively. For a x32 Advanced Package module, the Lane ID for 
TD_L[0:31]/RD_L[0:31] , TRD_L[0]/RRD_L[0]  and TRD_L[1]/RRD_L[1]  will be represented 
by the set of Lane ID {0…31, 64, 65} respectively.
In Table 4-3 , for a x16 Standard Package module, the Lane ID for TD_L[0:15]/RD_L[0:15]  will be 
represented by the set of Lane ID {0…15} respectively. For a x8 Standard Package module, the Lane 
ID for TD_L[0:7]/RD_L[0:7]  will be represented by the set of Lane ID {0…7} respectively.
Table 4-2. Lane ID: Advanced Package module (Sheet 1 of 2)
Logical Lane Number Lane ID Logical Lane Number Lane ID
0 00000000b 34 00100010b
1 00000001b 35 00100011b2 00000010b 36 00100100b
3 00000011b 37 00100101b
4 00000100b 38 00100110b5 00000101b 39 00100111b
6 00000110b 40 00101000b
7 00000111b 41 00101001b8 00001000b 42 00101010b
--- Page 8 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 104
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 9 00001001b 43 00101011b
10 00001010b 44 00101100b11 00001011b 45 00101101b
12 00001100b 46 00101110b
13 00001101b 47 00101111b14 00001110b 48 00110000b
15 00001111b 49 00110001b
16 00010000b 50 00110010b17 00010001b 51 00110011b
18 00010010b 52 00110100b
19 00010011b 53 00110101b20 00010100b 54 00110110b
21 00010101b 55 00110111b
22 00010110b 56 00111000b23 00010111b 57 00111001b
24 00011000b 58 00111010b
25 00011001b 59 00111011b26 00011010b 60 00111100b
27 00011011b 61 00111101b
28 00011100b 62 00111110b29 00011101b 63 00111111b
30 00011110b 64 01000000b
31 00011111b 65 01000001b32 00100000b 66 01000010b
33 00100001b 67 01000011b
Table 4-3. Lane ID: Standard Package Module
Logical Lane Number Lane ID Logical Lane Number Lane ID
0 00000000b 8 00001000b
1 00000001b 9 00001001b
2 00000010b 10 00001010b
3 00000011b 11 00001011b4 00000100b 12 00001100b
5 00000101b 13 00001101b
6 00000110b 14 00001110b7 00000111b 15 00001111bTable 4-2. Lane ID: Advanced Package module (Sheet 2 of 2)
Logical Lane Number Lane ID Logical Lane Number Lane ID
--- Page 9 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 105
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3 Interconnect redu ndancy remapping
As discussed in Section 5.9 , Advanced Package modules require redundancy remapping to recover 
from faulty Lanes. This section provides the detail s of remapping. After a successful remapping/repair, 
any unused repair Lanes must have their Transmitters tri-stated and Receivers disabled.
4.3.1 Data Lane repair
The specification supports remapping (repair) of up to two data Lanes for each group of 32 data 
Lanes. TD_P[31:0] (RD_P[31:0])  and TD_P[63:32] (RD_P[63:32])  are treated as two 
separate groups of 32 Lanes that can be independently repaired using redundant Lanes, 
TRD_P[1:0](RRD_P[1:0])  and TRD_P[3:2](RRD_P[3:2]) , respectively. TD_P[63:32]  
(RD_P[63:32] ) and hence TRD_P[3:2]  (RRD_P[3:2] ) do not apply to x32 Advanced Package Link.
Lane remapping is accomplished by “shift left” or “shi ft right” operation. A “shift left” is when data 
traffic of logical Lane TD_L[n]  on TD_P[n]  is multiplexed onto TD_P[n-1] . A shift left puts TD_L[0] 
onto TRD_P0  or TD_L[32]  onto TRD_P2 . A shift right operation is when data traffic TD_L[n]  is 
multiplexed onto TD_P[n+1] . A shift right puts TD_L[31]  onto TRD_P1  or TD_L[63]  onto TRD_P3 . 
See the pseudo codes in Section 4.3.3.1  and Section 4.3.3.2  that show the changes in mapping post 
repair.
Note: If the lower index redundant Lane ( TRD_P[0]  or TRD_P[2] ) is faulty, no data lanes 
can be repaired for its group. Note that if the higher index redundant lane ( TRD_P[1]  
or TRD_P[3] ) is faulty, one data lane can be repaired for its group.
After a data Lane is remapped, the Transmitter associ ated with the faulty physical Lane is tri-stated 
and the Receiver is disabled. The Transmitter and the Receiver of the redundant Lane used for the 
repair are enabled.
Figure 4-12  shows transmit bump side of data Lane rema pping for the first group of 32 Lanes. Both 
“shift left” and “shift right” remapping is needed to optimally repair up to any two Lanes within the 
group. Figure 4-13  shows details of the mux structure used for data Lane repair.
Note: Example repair implementations are shown for TD_P[31:0]  for clarity. It should be 
noted that the same schemes are also applicable to TD_P[63:32] .
Figure 4-12. Data Lane remapping possi bilities to fix potential defects
TRD_P0TD_P0TD_P1TD_P2
TD_P4
TD_P7TD_P8
TD_P11
TD_P12TD_P14TD_P15
TD_P18
TD_P19TD_P21TD_P22
TD_P25
TD_P20TD_P28TD_P29
TD_P27TRD_P1TD_P17TD_P16
TD_P6TD_P3TD_P9
TD_P24TD_P30
TD_P26 TD_P5TD_P23
TD_P31TD_P10
TD_P13
--- Page 10 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 106
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Figure 4-13. Data Lane remapping: Mux chain
TD_P[n]TD_L[n]
TD_P[n-1]TD_L[n-1]
TD_P[n+1]TD_L[n+1]
RD_P[n] RD_P[n-1] RD_P[n+1]
Rx Rx RxLan e Repair 
MuxLan e Repair 
MuxLan e Repair 
Mux
Lan e Repair 
MuxLan e Repair 
MuxLan e Repair 
MuxRD_L[n-1]
RD_L[n]
RD_L[n+1]TD_P[n+2]TD_L[n+2]
RD_P[n+2]
RxLan e Repair 
Mux
Lan e Repair 
Mux
RD_L[n+2]Tx Tx Tx TxShift_right
Shift_left
Die-1
Die-2
--- Page 11 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 107
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3.2 Data Lane repair  with Lane reversal
If Lanes are reversed, physical Lane 0 of Transmitter ( TD_P[0] ) is connected to physical Lane N-1 of 
the Receiver ( RD_P[N-1] ). N is 64 or 32 for x64 or x32 Advanced Package modules, respectively. 
See the pseudo codes in Section 4.3.3.3  and Section 4.3.3.4  that show the changes in mapping post 
repair.
4.3.3 Data Lane repa ir implementation
4.3.3.1 Single Lane repair
TRD_P[0](RRD_P[0])  must be used as the redundant Lane  to remap any single physical Lane 
failure for TD_P[31:0](RD_P[31:0]) . TRD[2](RRD[2])  must be used as the redundant Lane to 
remap any single Lane failure for TD_P[63:32] (RD_P[63:32]) .
Pseudo code for repair in TD_P[31:0](RD_P[31:0])  (0<= x <=31):
Pseudo code for repair in TD_P[63:32](RD_P[63:32])  (32<= x <=63) (this does not apply to x32 
Advanced Package Link): IF failure occurs in TD_P[x]: 
IF x > 0: 
FOR 0 <= i < x:  
TD_P[x-i-1] = TD_L[x-i] RD_L[x-i] = RD_P[x-i-1] 
TRD_P[0] = TD_L[0] 
RD_L[0] = RRD_P[0] 
 IF failure occurs in TD_P[x]: 
IF x > 32: 
FOR 0 <= i < x-32:  
TD_P[x-i-1] = TD_L[x-i] 
RD_L[x-i] = RD_P[x-i-1] 
 TRD_P[2] = TD_L[32] RD_L[32] = RRD_P[2] 
--- Page 12 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 108
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 As shown in Figure 4-14  TD_P[29]  is remapped in the direction to use TRD_P[0]  as the repair 
resource. Figure 4-15  shows the circuit implementation.
Figure 4-14. Example of Sing le Lane failure remapping
Figure 4-15. Example of Single Lane remapping implementationTRD_P0TD_P0TD_P1TD_P2
TD_P4
TD_P5TD_P7TD_P8TD_P9
TD_P10
TD_P11
TD_P12TD_P14TD_P15TD_P16
TD_P18
TD_P19TD_P21TD_P22TD_P23
TD_P25
TD_P26TD_P28TD_P29TD_P30
TD_P31
TRD_P1TD_P17
TD_P20TD_P24 TD_P3
TD_P6TD_P27 TD_P13
TD_P[n]TD_L[n]
TD_P[n-1]TD_L[n-1]
TD_P[n+1]TD_L[n+1]
RD_P[n] RD_P[n-1] RD_P[n+1]
Rx Rx RxLan e Repair 
MuxLan e Repair 
MuxLan e Repair 
Mux
Lan e Repair 
MuxLan e Repair 
MuxLan e Repair 
MuxRD_L[n-1]
RD_L[n]
RD_L[n+1]TD_P[n+2]TD_L[n+2]
RD_P[n+2]
RxLan e Repair 
Mux
Lan e Repair 
Mux
RD_L[n+2]Tx Tx Tx TxDie-1
Die-2BAD
LANE
--- Page 13 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 109
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3.3.2 Two Lane repair
Any two Lanes within a group of 32 can be repair ed using the two redundant bumps. For any two 
physical Lane failures in TD_P[31:0] (RD_P[31:0]) , the lower Lane must be remapped to 
TRD_P[0](RRD_P[0])  and the upper Lane is remapped to TRD_P[1](RRD_P[1]) . For any two 
physical Lane failures in TD_P[63:32] (RD_P[63:31]) , the lower Lane must be remapped to 
TRD_P[2](RRD_P[2])  and the upper Lane is remapped to TRD_P[3](RRD_P[3]) .
Pseudo code for two Lane repair in TD_P[31:0](RD_P[31:0])  (0<= x,y <=31):
Pseudo code for two Lane repair in TD_P[63:32] (RD_P[63:32])  (32<= x,y <=63) (this does not 
apply to x32 Advanced Package Link):
IF failure occurs in TD_P[x], TD_P[y] AND (x < y):
IF x > 32:
FOR 0 <= i < x-32:
TD_P[x-i-1] = TD_L[x-i]
RD_L[x-i] = RD_P[x-i-1]
TRD_P[2] = TD_L[32]RD_L[32] = RRD_P[2]
IF y < 63:
FOR 0 <= j < (63-y):
TD_P[y+j+1] = TD_L[y+j]
RD_L[y+j] = RD_P[y+j+1]
TRD_P[3] = TD_L[63]RD_L[63] = RRD_P[3] IF failure occurs in TD_P[x], TD_P[y] AND (x < y): 
IF x > 0: 
FOR 0 <= i < x:  
TD_P[x-i-1] = TD_L[x-i] RD_L[x-i] = RD_P[x-i-1] 
TRD_P[0] = TD_L[0] 
RD_L[0] = RRD_P[0] IF y < 31:  
FOR 0 <= j < (31-y):  
TD_P[y+j+1] = TD_L[y+j] 
   RD_L[y+j]=RD_P[y+j+1] 
 TRD_P[1] = TD_L[31] 
 RD_L[31]=RRD_P[1] 
--- Page 14 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 110
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Shown in Figure 4-16  is an example of two (physical Lanes 25 and 26) Lane remapping. Figure 4-17  
shows the circuit implementation. Both Transmitter and Receiver must apply the required remapping.
Figure 4-16. Example of Two Lane failure remapping
Figure 4-17. Example of Two Lane remapping implementationTRD_P0TD_P0TD_P1TD_P2
TD_P3
TD_P4
TD_P5TD_P7TD_P8TD_P9
TD_P11
TD_P12
TD_P6TD_P14TD_P15TD_P16
TD_P17
TD_P18
TD_P19TD_P21TD_P22TD_P23
TD_P25
TD_P26TD_P28TD_P29
TD_P27TD_P30
TD_P31
TRD_P1
TD_P20TD_P24
TD_P13TD_P10
TD_P[n] TD_P[n-1]TD_P[n+1
]
RD_P[n] RD_P[n-1] RD_P[n+1]
Rx Rx RxLan e Repair 
MuxLan e Repair 
MuxLan e Repair 
Mux
Lan e Repair 
MuxLan e Repair 
MuxLan e Repair 
MuxTD_P[n+2]
RD_P[n+2]
RxLan e Repair 
Mux
Lan e Repair 
MuxBAD
LANESTx Tx Tx Tx
Die-1
Die-2TD_L[n]TD_L[n-1]
TD_L[n+1]
TD_L[n+2]RD_L[n-1]
RD_L[n]
RD_L[n+1]
RD_L[n+2]
--- Page 15 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 111
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3.3.3 Single Lane repair with Lane reversal
For repair with Lane reversal (see Section 4.3.2 ) Transmitter side remapping is reversed to preserve 
shifting order for Receiver side remapping.
4.3.3.3.1 x64 Advanced Package Pseudo Codes
Pseudo code for one Lane failure in TD_P[31:0](RD_P[32:63])  (0<= x <=31):
Pseudo code for one Lane failure in TD_P[63:32](RD_P[0:31])  (32<= x <=63):
4.3.3.3.2 x32 Advanced Package Pseudo Codes
Pseudo code for one-Lane failure in TD_P[31:0](RD_P[0:31])  (0<= x <=31):IF failure occurs in TD_P[x]:
IF x > 0:
FOR 0 <= i < x:
TD_P[x-i-1] = TD_L[63-x+i]
RD_L[63-x+i] = RD_P[63-x+i+1]
TRD_P[0] = TD_L[63]
RD_L[63] = RRD_P[3]
IF failure occurs in TD_P[x]:
IF x > 0:
FOR 0 <= i < x:
TD_P[x-i-1] = TD_L[31-x+i]RD_L[31-x+i] = RD_P[31-x+i+1]
TRD_P[0] = TD_L[31]
RD_L[31] = RRD_P[1] IF failure occurs in TD_P[x]: 
IF x > 32: 
FOR 0 <= i < x-32:  
TD_P[x-i-1] = TD_L[63-x+i] RD_L[63-x+i] = RD_P[63-x+i+1] 
 TRD_P[2] = TD_L[31] 
RD_L[31] = RRD_P[1] 
--- Page 16 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 112
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3.3.4 Two Lane repair with Lane reversal
For repair with Lane reversal (see Section 4.3.2 ) Transmitter side remapping is reversed to preserve 
shifting order for Receiver side remapping.
4.3.3.4.1 x64 Advanced Package Pseudo Codes
Pseudo code for two Lane failure in TD_P[31:0](RD_P[32:63])  (0<= x <=31):
Pseudo code for two-Lane failure in TD_P[63:32](RD_P[0:31])  (32<= x <=63): IF failure occurs in TD_P[x], TD_P[y] AND (x < y): 
IF x > 0: 
FOR 0 <= i < x:  
TD_P[x-i-1] = TD_L[63-x+i] RD_L[63-x+i] = RD_P[63-x+i+1] 
TRD_P[0] = TD_L[63] 
RD_L[63] = RRD_P[3] IF y < 31:  
FOR 0 <= j < (31-y):  
TD_P[y+j+1] = TD_L[63-y-j] 
   RD_L[63-y-j] = RD_P[63-y-(j+1)] 
 TRD_P[1] = TD_L[32] 
 RD_L[32] = RRD_P[2] 
 IF failure occurs in TD_P[x], TD_P[y] AND (x < y): 
IF x > 32: 
FOR 0 <= i < x-32:  
TD_P[x-i-1] = TD_L[63-x+i] RD_L[63-x+i] = RD_P[63-x+(i+1)] 
TRD_P[2] = TD_L[31] 
RD_L[31] = RRD_P[1] IF y < 63:  
FOR 0 <= j < (63-y):  
TD_P[y+j+1] = TD_L[63-y-j] 
   RD_L[63-y-j] = RD_P[63-y-(j+1)] 
 TRD_P[3] = TD_L[0] 
 RD_L[0] = RRD_P[0] 
--- Page 17 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 113
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3.3.4.2 x32 Advanced Package Pseudo Codes
Pseudo code for two-Lane failure in TD_P[31:0](RD_P[0:31])  (0<= x <=31):
IF failure occurs in TD_P[x], TD_P[y] AND (x < y):
IF x > 0:
FOR 0 <= i < x:
TD_P[x-i-1] = TD_L[31-x+i]
RD_L[31-x+i] = RD_P[31-x+i+1]
TRD_P[0] = TD_L[31]RD_L[31] = RRD_P[1]
IF y < 31:
FOR 0 <= j < (31-y):
TD_P[y+j+1] = TD_L[31-y-j]
RD_L[31-y-j] = RD_P[31-y-(j+1)]
TRD_P[1] = TD_L[0]RD_L[0] = RRD_P[0]
--- Page 18 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 114
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3.4 Clock and Track Lane remapping
The specification supports remapping of one broken Lane for TCKP_P/RCKP_P , TCKN_P/RCKN_P  and 
TTRK_P/RTRK_P  physical Lanes. The repair scheme is shown in Figure 4-18 . Clock Lane remapping 
allows repair of single Lane failure for both differ ential and pseudo-differential implementation of the 
clock Receiver. The circuit details are shown in Figure 4-19  and Figure 4-20  for differential and 
pseudo-differential clock Receivers respectively.
After a Lane is remapped, the Transmitter is tri- stated. The Receiver of the physical redundant 
(RRDCK_P ) Lane is disabled.
Figure 4-18. Clock and Track repair
Figure 4-19. Clock and track repair: Differential Rx
Figure 4-20. Clock and track repair: Pseudo Differential RxTCKN_PTCKP_P
TRDCK_P
TTRK_P
Repair TRK
TCKP_P Normal Path 
Repair PathNormal Path P 
Repair NNormal Path N Repair P
Normal Path 
Repair Path
No RepairRepair Path clockTCKP_L
TCKN_L
Clock Rx (Differential)
Normal Path 
Repair PathRepair Path track
TTRK_LNormal Path TRK Rx
RxNormal Path RD 
RTRK_LRRDCK_L
RX Diff RCK_L
Repair PathTRDCK_LRCKP_P
TCKN_P RCKN_P
TRDCK_P RRDCK_P
TTRK_P RTRK_P
Repair Path
Repair TRK
Normal Path 
Repair PathNormal Path P 
Repair NNormal Path N Repair P
Normal Path 
Repair Path
No Repair
Clock Rx (Pseudo Differential)
Normal Path 
Repair PathNormal Path TRK Rx
Rx
RxRx
Normal Path_RD Repair Path clock
Repair Path trackTxCLKP
TxCLKN
TTRK_LTRDCK_LRCKP_L
RCKN_L
RTRK_LRRDCK_LTCKP_P RCKP_P
TCKN_P RCKN_P
TRDCK_P RRDCK_P
TTRK_P RTRK_P
--- Page 19 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 115
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3.5 Clock and Track Lane  repair implementation
Pseudo code for Clock and Track Lane repair:
The implementation of Clock and Track Lane remapping is shown in Figure 4-21 (a), Figure 4-21 (b) 
and Figure 4-21 (c) respectively. The corresponding circuit level details of remapping implementation 
are shown in Figure 4-22 , Figure 4-23  and Figure 4-24 .
Note that the both Transmitter and Receiver on CKRD  Lane are required during detection phase and 
can be tri-stated and turned off if not used for repair.
Figure 4-21. Clock and Track Lane repair scheme
Figure 4-22. Clock and track repair: CKP repair IF failure occurs in TCKP_P: 
 TCKN_P = TCKP_L AND TRDCK_P = TCKN_L 
 RCKP_L = RCKN_P AND RCKN_L = RRDCK_P ELSE IF failure occurs on TCKN_P: 
 TRDCK_P = TCKN_L 
 RCKN_L = RRDCK_P 
ELSE IF failure occurs in TTRK_P: 
 TRDCK_P = TTRK_L  RTRK_L = RRDCK_P  
(a) (b) (c)TCKN_PTCKP_P
TRDCK_P
TTRK_PTCKN_PTCKP_P
TRDCK_P
TTRK_PTCKN_PTCKP_P
TRDCK_P
TTRK_P
Repair Path
Repair TRK
Normal Path 
Repair PathNormal Path P 
Repair NNormal Path N Repair _P
Normal Path 
Repair Path
No Repair
Clock Rx (Pseudo Differential)
Normal Path 
Repair PathNormal Path TRK Rx
Rx
RxRx
Normal Path RD Repair Path clock
Repair Path trackTCKP_P RCKP_P
TCKN_P RCKN_P
TRDCK_P RRDCK_P
TTRK_P RTRK_PRCKP_L
RCKN_L
RTRK_LRRDCK_LTCKP_L
TCKN_L
TTRK_LTRDCK_L
--- Page 20 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 116
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3.6 Valid Repair and implementation
Valid Lane has a dedicated redundant Lane. If a fa ilure is detected on the Valid physical Lane, 
redundant Valid physical Lane is used to send Vali d. Valid failure detection and repair is performed 
during Link initialization and Training ( Section 4.5.3.3.4 ).
Figure 4-25  shows the normal path for Valid and redundant valid Lanes. Figure 4-26  shows the repair 
path for Valid Lane failure.Figure 4-23. Clock and track repair: CKN repair
Figure 4-24. Clock and track repair: Track repair
Figure 4-25. Valid repair: Normal PathRepair Path
Repair TRK
Normal Path 
Repair PathNormal Path P 
Repair NNormal Path N Repair P
Normal Path 
Repair Path
No Repair
Clock Rx (Pseudo Differential)
Normal Path 
Repair PathNormal Path TRK Rx
Rx
RxRx
Normal Path RD Repair Path clock
Repair Path trackTCKP_P RCKP_P
TCKN_P RCKN_P
TRDCK_P RRDCK_P
TTRK_P RTRK_PTCKP_L
TCKN_L
TTRK_LTRDCK_LRCKP_L
RCKN_L
RTRK_LRRDCK_L
Repair Path
Repair TRK
Normal Path 
Repair PathNormal Path P 
Repair NNormal Path N Repair P
Normal Path 
Repair Path
No Repair
Clock Rx (Pseudo Differential)
Normal Path 
Repair PathNormal Path TRK Rx
Rx
RxRx
Normal Path RD Repair Path clock
Repair Path trackTCKP_P RCKP_P
TCKN_P RCKN_P
TRDCK_P RRDCK_P
TTRK_P RTRK_PTCKP_L
TCKN_L
TTRK_LTRDCK_LRCKP_L
RCKN_L
RTRK_LRRDCK_L
TRDVLD_PTRDVLD_LRRDVLD_P
RxLan e R epair 
Mux
Lan e R epair 
MuxRRDVLD_LTVLD_PTVLD_LRVLD_P
RxLan e Repair 
Mux
Lan e Repair 
MuxRVLD_LTx TxDie-1 Die-2
--- Page 21 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 117
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.3.7 Width Degrade in St andard Package Interfaces
In the case of x16 Standard Package modules where Lane repair is not supported, resilience against 
faulty Lanes is provided by config uring the Link to a x8 width (Logical Lanes 0 to 7 or Logical Lanes 8 
to 15, which exclude the faulty Lanes). For example, if one or more faulty Lanes are in logical Lane 0 
to 7, the Link is configured to x8 width using logical Lanes 8 to 15. The configuration is done during 
Link initialization or retraining. Transmitters of the disabled Lanes are tri-stated and Receivers are disabled.
In the case of x8 Standard Package modules, resilience against faulty Lanes is provided by 
configuring the Link to a x4 width (Logical Lanes 0 to 3 or Logical Lanes 4 to 7, which exclude the faulty Lanes). The configuration is done during Link  initialization or retraining. Transmitters of the 
disabled Lanes are tri-stated and Receivers are disabled.
Figure 4-5  shows the byte to Lane mapping for a width degraded x8 interface
4.4 Data to Clock Training and Test Modes
Note: Sideband commands will be identified as {SB command}.
Figure 4-27  shows the infrastructure for interface training and testing. The Transmit Die and Receive 
Die implement the same Linear Feedback Shift Register (LFSR) described in Section 4.4.1 . The 
pattern sent from the Transmitter along with forwarded clock and Valid is compared with locally generated reference pattern. Both transmit and rece ive pattern generators must start and advance in 
sync. The compare circuitry checks for matching data each UI. Any mismatch between the received 
pattern and pattern predicted by the local pattern generator is detected as an error.Figure 4-26. Valid Repair: Repair Path
TRDVLD_L
RxLan e Repair 
Mux
Lan e Repair 
MuxRRDVLD_LTVLD_L
RxLan e Repair 
Mux
Lan e Repair 
MuxRVLD_LTx TxDie-1 Die-2
TRDVLD_P RRDVLD_PTVLD_P RVLD_P
--- Page 22 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 118
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 The receive die must implement two types of comparison schemes
•Per-Lane comparison : Per-Lane comparison is used to identify the number of failing Lanes 
between the two dies. Any mismatch, above the se t threshold between the received pattern and 
the expected pattern on each Lane, will set an internal error detect bit for each Lane. Once a 
pattern mismatch on a particular Lane is found, this error bit is set for the remainder of the test. Figure 4-28  illustrates Per-Lane comparison mode. This mode will indicate per-Lane errors within 
the module (N = 68 (64 + 4 RD) for a x64 Advanced Package Module, N = 34 (32 + 2 RD) for a 
x32 Advanced Package Module, N = 16 for a x16 Standard Package Module, and N = 8 for a x8 
Standard Package Module, respectively). The pe r-Lane comparison results can be read via 
sideband.
•Aggregate comparison : In this mode, pattern mismatches each UI on any Lane within the 
module are accumulated into a 16-bit error coun ter. The Lane errors are ORed to generate a 
module-level error and counted as shown in Figure 4-29 . This scheme can be used for module 
level margin and BER.Figure 4-27. Test and training logic
Figure 4-28. Lane failure detectionRef Pattern 
Gen
Error 
Detect
ValidClock
PatternPattern 
Gen
Transmit Die Receive DieRxRxRx Pattern Valid

--- Page 23 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 119
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.4.1 Scrambling and trai ning pattern generation
A Linear feedback shift register (LFSR) is de fined for scrambling and test pattern generation.
The LFSR uses the same polynomial as PCIe: G(X)=X23 + X21 + X16 + X8 + X5 + X2 + 1. Each 
Transmitter is permitted to implement a separate LFSR for scrambling and pattern generation. Each 
Receiver is permitted to implement a separate LFSR  using the same polynomi al for de-scrambling and 
pattern comparison. The implementation is shown in Figure 4-30 . The seed of the LFSR is Lane 
dependent, and based on the Logical Lane number and the seed value for Lane number is modulo 8 
as shown in Table 4-4 .
Alternatively, implementations can choose to implement one LFSR with different tap points for 
multiple Lanes as shown in Figure 4-31 . This is equivalent to individual LFSR per-Lane with different 
seeds.Figure 4-29. All Lane error detection
Table 4-4. LFSR seed values
Lane Seed
0 23’h1DBFBC
1 23’h 0607BB2 23’h1EC760
3 23’h18C0DB
4 23’h010F125 23’h19CFC9
6 23’h0277CE
7 23’h1BB807RD0, RD2
a
a. Same as Lane 3. These are not currently used.23’h18C0DB
RD1, RD3b
b. Same as Lane 4. These are not currently used.23’h010F12Lane 0
Lane 1
Lane 2
Lane 3
Lane (N-1)
Lane NRemote pattern
Local patternError 
Counter
--- Page 24 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 120
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Figure 4-30. LFSR implementation
D22 D21 D20 D19 D18 D17 D16 D15 D14 D13 D12 D11 D10 D9 D8 D7 D6 D5 D4 D3 D2 D1 D0
Seed 
D0Seed 
D1Seed 
D2Seed 
D3Seed 
D4Seed 
D5Seed 
D6Seed 
D7Seed 
D8Seed 
D9Seed 
D10Seed 
D11Seed 
D12Seed 
D13Seed 
D14Seed 
D15Seed 
D16Seed 
D17Seed 
D18Seed 
D19Seed 
D20Seed 
D21Seed 
D22Data_InData_Out
--- Page 25 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 121
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Figure 4-31. LFSR alternate implementation
D22 D21 D20 D19 D18 D17 D16 D15 D14 D13 D12 D11 D10 D9 D8 D7 D6 D5 D4 D3 D2 D1 D0Reset Value = ‘1
For i = 0, 8, 16, 24, 32, 40, 48, 56: Tap_Eqn_Lane_i = D9^D13  
For i = 1, 9, 17, 25, 33, 41, 49, 57: Tap_Eqn_Lane_i = D1^D13 For i = 2, 10, 18, 26, 34, 42, 50, 58: Tap_Eqn_Lane_i = D13^22  For i = 3, 11, 19, 27, 35, 43, 51, 59: Tap_Eqn_Lane_i = D1^D22 For i = 4, 12, 20, 28, 36, 44, 52, 60: Tap_Eqn_Lane_i = D3^D22  For i = 5, 13, 21, 29, 37, 45, 53, 61: Tap_Eqn_Lane_i = D1^D3 For i = 6, 14, 22, 30, 38, 46, 54, 62: Tap_Eqn_Lane_i = D3^D9  
For i = 7, 15, 23, 31, 39, 47, 55, 63: Tap_Eqn_Lane_i = D1^D9Seed 
D0Seed 
D1Seed 
D2Seed 
D3Seed 
D4Seed 
D5Seed 
D6Seed 
D7Seed 
D8Seed 
D9Seed 
D10Seed 
D11Seed 
D12Seed 
D13Seed 
D14Seed 
D15Seed 
D16Seed 
D17Seed 
D18Seed 
D19Seed 
D20Seed 
D21Seed 
D22
Data_Out_Lane_iData_In_Lane_i
Tap_Eqn_Lane_i
--- Page 26 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 122
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5 Link Initializa tion and Training
Link initialization and training are described at a Module level. The description of terms are used in 
this section are as follows:
• UCIe Module Partner: A UCIe Module Partner is  the corresponding UCIe Module on the remote 
UCIe Die to which the UCIe Module connects. For example, if two UCIe Dies A and B are 
connected in the standard Die rotate configuration by a 2-module UCIe Link, Modules 0 and 1; 
UCIe Die A’s Module 0 (UCIe Module A0) is connect ed to UCIe Die B’s Module 1 (UCIe Module B1); 
then A0 is the UCIe Module Partner of B1 and vice-versa.
• Phase Interpolator (PI) in this specification is used to refer any method of generating and 
selecting sampling clock phase.
• Timeout: Every state except RESET, Active, L1/L 2, and TRAINERROR in the Link Training State 
Machine has a residency timeout of 8 ms. For states with sub-states, the timeout is per sub-state 
(i.e., if Physical Layer is in a state for greater than 8 ms, then it transitions to TRAINERROR and 
eventually to RESET). Physical Layer sideband ha ndshakes for RDI state transitions with remote 
Link partner also timeout after 8 ms. The timeout counters must be reset if a sideband message 
with “Stall” encoding is received. All timeout va lues specified are -0% and +50% unless explicitly 
stated otherwise. All timeout values must be set to the specified values after Domain Reset exit. 
All counter values must be set to th e specified values after Domain Reset.
• Electrical idle is described in Section 5.12 .
• When Management Transport protocol is suppor ted over the sideband, the term SB_MGMT_UP 
refers to an internally maintained flag in the PHY that indicates whether the Management 
Transport path has been successfully initialized with the partner chiplet. If the flag is cleared to 0, 
the Management Transport path is not up. If the fl ag is set to 1, the Management Transport path 
is up. The flag is cleared on a Management Rese t or when a Heartbeat timeout is detected (see 
Section 8.2.5.1.3 ). The flag is set after successful completion of the initialization phase of 
Management Transport path setup as described in Section 8.2.3.1.2 .
When training during Link Initialization (i.e., Physical Layer transitions out of RESET state), hardware 
is permitted to attempt training multiple times:
• Triggers for initiating Link Training for Manage ment Transport path setup on the sideband are:
— Software writes 1 to the Retrain Link bit in the Sideband Management Port Structure register 
(see Section 8.1.3.6.2.1 )
— HW-autonomous trigger by the Management Port Gateway to automatically train the 
Management Transport path on the sideband without SW intervention, as occurs after 
Management Reset
— SBINIT pattern (two consecutive iterations of 64-UI clock pattern and 32-UI low) is observed 
on any sideband Receiver clock/data pair, when the SB_MGMT_UP flag is cleared to 0
• The triggers for initiating Link Training for the mainband are:
— Software writes 1 to Start UCIe Link Training bit in UCIe Link Control register in the UCIe Link 
DVSEC (see Section 9.5.1.5 )
— When Management Transport protocol is supporte d on the UCIe link, software writes 1 to the 
Retrain Link bit in the Management Port Structur e register of either the Sideband or Mainband 
Management Port that is associated with the UCIe link (see Section 8.1.3.6.2.1 )
— Adapter triggers Link Training on the RDI (RDI status is Reset and there is a NOP to Active 
transition on the state request)
--- Page 27 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 123
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 — If [Management Transport protocol is not suppor ted] OR [the SB_MGMT_UP flag is cleared to 
0], the SBINIT pattern (two consecutive iterations of 64-UI clock pattern and 32-UI low) is 
observed on any sideband Receiver clock/data pair
— If [Management Transport protocol is supported]  AND [the SB_MGMT_UP flag is set to 1], the 
{SBINIT done req} sideband message was received from the module partner
If hardware fails training after an implementation -specific number of attempts, the hardware must 
transition to RESET and wait for a subsequent Link Training trigger. Physical Layer must escalate a 
fatal error to the D2D Adapter on  the RDI if mainband Software-triggered or RDI-triggered Link 
training fails or there is a Link-up-to-Link-down transition due to a Physical Layer timeout.
Throughout this section, references to mainband transmitter and receiver behavior are called out in 
various state machine states. These references do no t apply when the port does not have a mainband 
(i.e., the port is a sideband-only port without a ph ysically present mainband, or the port is a UCIe-S 
port with only the sideband used. In the latter sce nario, the mainband transmitters are held in tri-
state throughout and the mainband receivers are disabled.
4.5.1 Link Training Basic Operations
Some basic operations in Link training are defined in this section. These will be used in mainband 
initialization, training and margining.
4.5.1.1 Transmitter initiated Data to Clock Point Test
In this mode, the Transmitter initiates the data to cl ock training on all Lanes in the module at a single 
PI phase. When not performing the actions relevant to this state:
• Data, Valid, and Track Transmitters drive low• Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking)
• Data, Valid, and Clock Receivers are enabled
• Track Receiver is permitted to be disabled
The sequence of steps for this test are as fo llows for each UCIe Module of the UCIe Link:
1. The UCIe Module sets up the Tr ansmitter parameters (shown in Table 4-5 ), sends a {Start Tx Init 
D to C point test req} sideband message to its UCIe Module Partner, and waits for a response. The 
data field of this message includes the required parameters, shown in Table 4-5 . The Receiver on 
the UCIe Module Partner must enable the patte rn comparison circuits to compare incoming 
mainband data to the locally generated expected pattern. Once the data to clock training 
parameters for its Receiver are setup, the UCIe Modu le Partner responds with a {Start Tx Init D to 
C point test resp} sideband message.
2. The UCIe Module resets the LFSR (scrambler) on its mainband Transmitters and sends the {LFSR 
clear error req} sideband message. The UCIe Module  Partner resets the LFSR and clears any prior 
compare results on its mainband Receivers and responds with {LFSR clear error resp} sideband 
message.
3. The UCIe Module sends the pattern (selected through “Tx Pattern Generator Setup”) for the 
selected number of cycles (“Tx Pattern Mo de Setup”) on its mainband Transmitter.
4. The UCIe Module Partner performs the comparison on its Receivers for each UI during the pattern 
transmission based on “Rx compare setup” and logs the results.
--- Page 28 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 124
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 5. The UCIe Module requests its UCIe Module Partner for the logged results in Step 4  by sending 
{Tx Init D to C results req} sideband message. Th e UCIe Module Partner stops comparison on its 
mainband Receivers and responds with the logged results {Tx Init D to C results resp} sideband 
message.
6. The UCIe Module stops sending the pattern on its Transmitters and sends the {End Tx Init D to C 
point test req} sideband message and the UCIe Modu le Partner responds with {End Tx Init D to C 
point test resp}. When a UCIe Module has rece ived the {End Tx Init D to C point test resp} 
sideband message, the corresponding sequence has completed.
Table 4-5. Data-to-Cloc k Training Parametersa
a. See Table 7-11  for the encodings. See also the registers in Section 9.5.3.26  and Section 9.5.3.27 . See also the Implementation
Note below this table.Parameter Sideband Message Field Options
Clock sampling /PI phase controlClock Phase control at 
TransmitterEye Center found by training
Eye Left Edge found by training
Eye Right Edge found by training
Tx Pattern Generator SetupData Pattern (for Data Lanes)LFSR Pattern for Data Lanes
Per-Lane ID pattern for Data Lanes as defined in Table 4-7
Valid Pattern (for Valid Lanes) VALTRAIN pattern four 1s followed by four 0s
Tx Pattern Mode Setup Pattern ModeBurst Mode: Uses Burst Count/Idle Count/Iteration Count
Continuous Mode: Uses Burst count to indicate the number 
of UI of transmission. Idle Count = 0, Iteration Count = 1
Rx Compare SetupMaximum Comparison error 
thresholdMaximum comparison error threshold
Comparison Mode Per-Lane or aggregate error compare
--- Page 29 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 125
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.1.2 Transmitter initiated Da ta to Clock Eye Width Sweep
In this mode, the Transmitter initiates the data to clock training on all Lanes in the module and 
sweeps through the sampling PI phases. This mode can also be used to check system margin. When 
not performing the actions relevant to this state:
• Data, Valid, and Track Transmitters drive low
• Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking)
• Data, Valid, and Clock Receivers are enabled
• Track Receiver is permitted to be disabledIMPLEMENTATION NOTE
The Training Setup 1 and Training Setup 2 registers (see Section 9.5.3.26  and Section 9.5.3.27 , 
respectively) are applicable for compliance or de bug. For regular operation, implementations must 
follow the comparison mode, iteration or UI count  specified in the corresponding states (for 
example, Section 4.5.3.4.8  specifies 4K UI of continuous mode LFSR pattern and total (aggregate) 
error count); and because these patterns are fixed,  Rx is permitted to ignore Burst Count/Idle 
Count/Iteration Count values in the sideband messages for regular operation. Training Setup 3 and 
Training Setup 4 registers (see Section 9.5.3.28  and Section 9.5.3.29 , respectively) are applicable 
for regular operation as well as compliance and debug.
Additionally, implementation notes for the parameters in Table 4-5 :
• Clock sampling/PI phase control: For Tx-initiated Data to Clock point tests, this parameter is for 
informational purposes only. For Rx-initiated Data to Clock point tests, the Transmitter sets the 
PI phase for the requested setting (Eye Left edge, Eye Right edge or Eye Center) based on the best known values from the most recent training  for the corresponding speed. For the states of 
MBTRAIN.VALVREF and MBTRAIN.DATAVREF, this would be the best known values at the 
Transmitter at 4 GT/s. This field is not applicable and is ignored for Data to Clock eye sweep tests.
• Tx Pattern Generator Setup and Tx Pattern Mode Setup:
— For Continuous mode LFSR pattern, “Burst Count” indicates the number of UI of 
transmission (for example, it is 4096 (or 4K) in Section 4.5.3.4.8 ). “Idle Count” is always 0 
and “Iteration Count” is always 1.
— For Continuous mode Per-Lane ID pattern, “Burst Count” indicates the number of UI of 
transmission (e.g., it is 2048 for 128 iterations of the 16 bit pattern). “Idle Count” is always 
0 and “Iteration Count” is always 1.
— For Burst mode, the transmission is a “Burst Count” number of UI followed by an “Idle 
Count” number of UI of 0 repeating for an “Itera tion Count” number of times. In the case of 
Per-Lane ID pattern, the “Burst Count” must be a multiple of the pattern size in UI. Burst 
mode is currently not used for regular operation of Link Training.
— VALTRAIN pattern is used for training of the Valid lane. In Continuous mode, “Burst Count” 
indicates the number of UI of transmission (for example, it is 1024 for 128 iterations of the 
8-bit pattern); “Idle Count” is always 0 and “Iteration Count” is always 1. In Burst mode, 
the transmission is a “Burst Count” number of UI followed by an “Idle Count” number of UI of 0 repeating for an “Iteration Count” num ber of times; the “Burst Count” must be a 
multiple of the pattern size in UI.
--- Page 30 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 126
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 The sequence of steps for this test are as follows:
1. The UCIe Module sets up the Tr ansmitter parameters (shown in Table 4-5 ), sends a {Start Tx Init 
D to C eye sweep req} sideband message to its UCIe Module Partner, and then waits for a response. The data field of this message in cludes the required parameters, shown in Table 4-5 . 
The Receiver on the UCIe Module Partner must en able the pattern comparison circuits to compare 
incoming mainband data to the locally genera ted expected pattern. Once the data to clock 
training parameters for its Receiver are setup, th e UCIe Module Partner responds with a {Start Tx 
Init D to C eye sweep resp} sideband message.
2. The UCIe Module resets the LFSR (scrambler) on its mainband Transmitters and sends the {LFSR 
clear error req} sideband message. The UCIe Module  Partner resets the LFSR and clears any prior 
compare results on its mainband Receivers and responds with {LFSR clear error resp} sideband 
message.
3. The UCIe Module sends the pattern (selected through “Tx Pattern Generator Setup”) for the 
selected number of cycles (“Tx Pattern Mo de Setup”) on its mainband Transmitter.
4. The UCIe Module Partner performs comparison on  its Receivers for each UI during the pattern 
transmission based on “Rx compare setup” and logs the results.
5. The UCIe Module requests its UCIe Module Partner for the logged results in Step 4  by sending 
{Tx Init D to C results req} sideband message. Th e UCIe Module Partner stops comparison on its 
mainband Receivers and responds with the logged results {Tx Init D to C results resp} sideband 
message.
6. The UCIe Module sweeps through the PI phases on its forwarded clock Transmitter each time 
repeating Step 2 through Step 5 to find the passing PI phase range. The sweep steps and range 
are implementation specific.
7. The UCIe Module stops sending the pattern on its Transmitters and sends the 
{End Tx Init D to C eye sweep req} sideband message and the UCIe Module Partner responds 
with {End Tx Init D to C eye sweep resp}. When a UCIe Module has received the {End Tx Init D to 
C point eye sweep resp} sideband message, the corresponding sequence has completed.
4.5.1.3 Receiver initiated Data to Clock point test
In this mode, the Receiver initiates the data to clock training on all Lanes in the module at a single PI 
phase. When not performing the actions relevant to this state:
• Data, Valid, and Track Transmitters drive low• Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking)
• Data, Valid, and Clock Receivers are enabled
• Track Receiver is permitted to be disabled
The sequence of steps for this test are as follows:
1. The UCIe Module enables the pattern comparison circuits to compare incoming mainband data to 
the locally generated expected pattern, sets  up the Receiver parameters (shown in Table 4-5 ), 
sends a {Start Rx Init D to C point test req} sideband message to its UCIe Module Partner, and then waits for a response. The data field of this message includes the required parameters, shown 
in Table 4-5 . Once the data to clock training parameters for its Transmitter are setup, the UCIe 
Module Partner responds with a {Start Rx Init D to C point test resp} sideband message.
2. The UCIe Module Partner resets the LFSR (scrambler) on its mainband Transmitters and sends 
sideband message {LFSR clear error req}. The UCIe  Module resets the LFSR and clears any prior 
compare results on its mainband Receivers and responds with {LFSR clear error resp} sideband 
message.
--- Page 31 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 127
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 3. The UCIe Module Partner sends the pattern (sel ected through “Tx Pattern Generator Setup”) for 
the selected number of cycles (“Tx Pattern Mode Setup”) on its mainband Transmitter.
4. The UCIe Module performs the comparison on its mainband Receivers for each UI during the 
pattern transmission based on “Rx compare setup” and logs the results.
5. The UCIe Module Partner sends a sideband message {Rx Init D to C Tx count done req} sideband 
message once the pattern count is complete. The UCIe Module, stops comparison and responds 
with the sideband message {Rx Init D to C Tx count done resp}. The UCIe Module can now use 
the logged data for its Receiver Lanes.
6. The UCIe Module sends an {End Rx Init D to C point test req} sideband message and the UCIe 
Module Partner responds with an {End Rx Init D to C point test resp} sideband message. When a 
UCIe Module has received the {End Rx Init D to C point test resp} sideband message, the 
corresponding sequence has completed.
4.5.1.4 Receiver initiated Data to Clock Eye Width Sweep
In this mode, the Receiver initiates the data to clock training on all Lanes in the module at a single PI phase. When not performing the actions relevant to this state:
• Data, Valid, and Track Transmitters drive low
• Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking)
• Data, Valid, and Clock Receivers are enabled
• Track Receiver is permitted to be disabled
The sequence of steps for this test are as follows:
1. The UCIe Module enables the pattern comparison circuits to compare incoming mainband data to 
the locally generated expected pattern, sets  up the Receiver parameters (shown in Table 4-5 ), 
sends a {Start Rx Init D to C eye sweep req} si deband message to its UCIe Module Partner, and 
then waits for a response. The data field of this message includes the required parameters, shown in Table 4-5 . The Transmitter on the UCIe Module Partner must be idle. Once the data to clock 
training parameters for its Transmitter are setup, the UCIe Module Partner responds with a {Start 
Rx Init D to C eye sweep resp} sideband message.
2. The UCIe Module Partner resets the LFSR (scrambler) on its mainband Transmitters and sends 
sideband message {LFSR clear error req}. The UCIe  Module resets the LFSR and clears any prior 
compare results on its mainband Receivers and responds with an {LFSR clear error resp} 
sideband message.
3. The UCIe Module Partner sends the pattern (sel ected through “Tx Pattern Generator Setup”) for 
the selected number of cycles (“Tx Pattern Mode Setup”) on its mainband Transmitter.
4. The UCIe Module performs the comparison on its mainband Receivers for each UI during the 
pattern transmission based on “Rx compare setup” and logs the results.
5. The UCIe Module Partner requests the UCIe Module for the logged data to clock test results 
through a {Rx Init D to C results req} sideband  message. The UCIe Module responds with the 
logged results for its mainband Receiver using the {Rx Init D to C results resp} sideband 
message. The UCIe Module Partner can determine if the pattern comparison at the PI phase 
passed or failed based on the results log.
6. The UCIe Module Partner sweeps through the PI phases on its forwarded clock each time it 
repeats Step 2  through Step 5  to find the passing PI phase range. The sweep pattern and range 
are implementation specific.
--- Page 32 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 128
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 7. The UCIe Module Partner sends an {Rx Init D to  C sweep done with results} sideband message 
with results for its mainband Transmitter. The UCIe Module can use the sweep results for its 
mainband Receivers.
8. The UCIe Module sends an {End Rx Init D to C eye sweep req} sideband message and the UCIe 
Module Partner responds with an {End Rx Init D to C eye sweep resp} si deband message. When a 
UCIe Module has received the {End Rx Init D to C eye sweep resp} sideband message, the 
corresponding sequence has completed.
4.5.2 Link Training with Retimer
The following diagram explains the initializati on flow with UCIe Retimer. As shown in Figure 4-32 , 
external and UCIe (UCIe Die to UCIe Retimer) Link s are permitted to come up independently. When a 
UCIe Link trains up to local data rate and width,  the remote UCIe information is requested over the 
external Link. If there is a data rate and width diff erence, each UCIe Link is permitted to be retrained 
to achieve a speed (data rate) and width match (if th e UCIe Retimer requires this for operation, it 
must initiate Retraining from LinkSpeed state). Th is can happen multiple times during initial Link 
bring up or retraining. Once the UCIe Retimer has determined that the UCIe Link configuration is 
suitable for successful operation with remote Retimer partner, the UCIe Link proceeds to ACTIVE through protocol level Link initialization (LINKINIT).
Figure 4-32. Example Retimer bring up when performing speed/width match
Ext. Link Bring up
(independent)
Ext. Link Up
(Can send retimer-retimer 
messages)SBInit
MBINIT (w/Local Param)
MBTRAIN (local Data rate)
Speed/width match check 
LINKINIT (protocol)
Active SBInit
MBINIT (w/Local Param)
MBTRAIN (local Data rate)
Speed/width match check 
LINKINIT (protocol)
Active External LinkUCIe Die 0    UCIe Retimer 0
Speed/width resolution
Message exchange
Functional Data  UCIe Retimer 1    UCIe Die 1 
--- Page 33 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 129
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3 Link Training State Machine
A high level initialization flow is shown in Figure 4-33 . A high level description of each state is shown 
in Table 4-6 . The details and actions performed in each state are described in the following sections.
Table 4-6. State Definitions for Initialization
State Description
RESET This is the state following primary reset or exit from TRAINERROR.
SBINITSideband initialization state where the sideband is detected, repaired (when 
applicable) and out of reset message is transmitted.
MBINITFollowing sideband initialization, Mainband (MB) is initialized at the lowest speed. 
Both dies perform on die calibration followed by interconnect repair (when 
applicable).
MBTRAINMainband (Data, Clock and Valid signals) speed of operation is set to the highest 
negotiated data rate. Die-to-Die training of mainband is performed to center the 
clock with respect to Data.
LINKINIT This state is used to exchange  Adapter and Link management messages.
ACTIVE This is the state in which transactions are sent and received.
L1/L2 Power Management state.PHYRETRAIN This state is used to begin the retrain flow for the Link during runtime.
TRAINERRORState is entered when a fatal or non-fatal event occurs at any point during Link 
Training or operation.
--- Page 34 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 130
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Figure 4-33. Link Training State Machine
MBINIT
LINKINIT
ACTIVERESET
SBINIT
MBTRAINTRAINERRORAny State
Except 
RESET
L1/L2From L1From L2
PHYRETRAIN
--- Page 35 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 131
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3.1 RESET
Physical Layer must remain in RESET for a minimum of 4 ms upon every entry to RESET, to allow PLLs 
to stabilize and any other Link Training initializatio n requirements to be met. The minimum conditions 
necessary to exit RESET are as follows:
• Power supplies are stable• Sideband clock is available and running at 800 MHz
•I f  {
— Physical Layer and Die to Die Adapter internal clocks are stable and available— Mainband clock speed is set to the slowest I/O data rate (2 GHz for 4 GT/s)
— Local SoC/Firmware not keeping the Physical Layer in RESET
— Link training trigger for the mainband has occu rred (triggers are defined in the beginning of 
Section 4.5 )
} OR{
— Sideband Management Transport protocol is supported
— SB_MGMT_UP = 0— Local SoC/Firmware is not ke eping the sideband in RESET
— Management Port Gateway indicates that it is ready for Management Transport path 
initialization
— Link Training trigger for the Management Transport path has occurred (triggers are defined in 
the beginning of Section 4.5 )
}
• Data, Valid, Clock, and Track Transmitters are tri-stated• Data, Valid, Clock, and Track Receivers are permitted to be disabled
• If [Management Transport protocol is not supported] OR [SB_MGMT_UP=0], Sideband 
Transmitters are held low
• Sideband Receivers are enabled
If [Management Transport protocol is supported ] AND [SB_MGMT_UP=1], the Physical Layer is 
available for sideband packet (any sideband packets including Management Port messages) transmission/reception in the RESET state.
If [Management Transport protocol is  not supported] OR  [SB_MGMT_UP=0]:
• While the LTSM is in the RESET state, a Physical Layer implementation is permitted to handle any 
new or pending untransmitted sideband register access requests as Unsupported Requests, and if 
doing so, it must return a corresponding completion as well as end-to-end credit and RDI credit to 
the Adapter. Similarly, for register access comp letions, a Physical Layer implementation is 
permitted to discard any new or pending untransmitted completions and because completions do 
not consume a credit, there is no credit return back to the Adapter for these. While the LTSM is in the RESET state, an implementation may handle any new or pending untransmitted Vendor-
defined messages in an implementation depend ent manner. This could include dropping the 
message and logging an error.
--- Page 36 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 132
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3.2 Sideband Initialization (SBINIT)
In this state, the sideband (SB) interface is initialized and repaired (when applicable).
If Management Transport is supported AND the SB_MGMT_UP flag is set to 1:
• Initialization and repair of the sideband ( Step 1  through Step 9  for Advanced Package and Step 1  
through Step 7  for Standard Package as shown later in this section) are skipped, and only an 
SBINIT Done Req/Resp handshake is performed in this state (see Step 10  for Advanced Package 
flow and Step 8  for Standard Package flow as shown later in this section); otherwise, all the steps 
are traversed
• Physical Layer sideband is available for sideband packet (any sideband packets including 
Management Port messages) transmission/reception in this state
When not performing the actions relevant to this state:
• Data, Valid, Clock, and Track Transmitters remain tri-stated• Data, Valid, Clock, and Track Receivers are permitted to be disabled
• If [Management Transport protocol is not supporte d] OR [the SB_MGMT_UP flag is cleared to 0] 
OR [a Sideband Packet is not being sent], SB Transmitters continue to be held Low
• SB Receivers continue to be enabled
The SB initialization procedure is performed at 800 MT/s with 800-MHz sideband clock.
If [Management Transport protocol is  not supported] OR  [SB_MGMT_UP=0]:
• While the LTSM is in the SBINIT state, a Physical Layer implementation is permitted to wait for an 
implementation specific amount of time to see whether SBINIT is progressing or completing, and 
subsequently handle any new or pending untrans mitted sideband register access requests as 
Unsupported Requests, and if treating the request as an Unsupported Request, it must return a 
corresponding completion as well as end-to-end cred it and RDI credit to the Adapter. Similarly, for 
register access completions, a Physical Layer implementation is permitted to wait for an 
implementation specific amount of time to see whether SBINIT is progressing or completing, and 
subsequently discard any new or pending untran smitted completions and because completions do 
not consume a credit, there is no credit return back to the Adapter for these. While the LTSM is in 
the SBINIT state, an implementation may handle any new or pending untransmitted Vendor-
defined messages in an implementation depend ent manner. This could include dropping the 
message and logging an error.
Advanced Package has redundant SB clock and SB data Lanes (
DATASBRD , CKSBRD ) in addition to 
DATASB  and CKSB . SBINIT sequence for Advanced Package  where interconnect repair may be 
needed is as follows:
1. The UCIe Module must start and continue to send iterations of a 64-UI clock pattern (a clock 
pattern is defined as starting with 1 and toggling  every UI of transmission, i.e., 1010...) and 32-
UI low on both sideband data Transmitters ( TXDATASB  and TXDATASBRD ). The UCIe Module must 
send strobes on both TXCKSB  and TXCKSBRD  during the 64-UI clock pattern transmission and be 
gated (held low) otherwise.
2. UCIe Module Partner must sample each incoming data patterns on its sideband Receivers with 
both incoming sideband clocks (this fo rms four Receiver/clock combinations).
3. A sideband data-clock Receiver combination detection is considered successful if 128 UI clock 
pattern is detected.
--- Page 37 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 133
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4. If a UCIe Module Partner detects the pattern successfully on at least one of its sideband data-
clock Receiver combination, it must stop sending data and clock on its sideband Transmitters after 
four more iterations of 64-UI clock pattern and 32-UI low. This will allow for any time differences 
in both UCIe Module and UCIe Module Partne r coming out of RESET state. The sideband 
Transmitter and Receiver on the UCIe Module must now be enabled to send and receive sideband 
messages
5. If pattern is not detected on its sideband Rece iver, the UCIe Module must continue to alternate 
between sending the pattern on its sideband Tran smitters for 1 ms, and holding low for 1 ms, for 
a total of 8 ms. The sideband Receiver of the UCIe  Module must remain enabled during this time. 
Timeout occurs after 8 ms. If a timeout occurs, the UCIe Module enters TRAINERROR state.
6. If detection is successful on more than one side band data/clock combination, the device can pick 
a combination based on a priority order.  Pseudocode for sideband assignment:
7. If the sideband on the UCIe Module is enabled to send and receive sideband messages ( Step 4 ), 
the UCIe Module must start and continue to send {SBINIT Out of Reset} sideband message on 
both TXDATASB  and TXDATASBRD  while sending both TXCKSB  and TXCKSBRD  until it detects the 
same message in its sideband Receivers or a timeout occurs at 8 ms.
8. If {SBINIT Out of Reset} sideband message detect ion is successful on its sideband Receivers, the 
UCIe Module stops sending the sideband me ssage. Before sending any further sideband 
messages, both UCIe Module and UCIe Module  Partner must apply Sideband Data/Clock 
assignment (called the functional sideband) based on the information included in the {SBINIT Out 
of Reset} sideband message.
9. Any further sideband messages must be sent and received on the functional sideband. Any 
sideband message exchange can now be performed.
10. The UCIe Module sends the {SBINIT done req} sideband message and waits for a response. If 
this message is received successfully, UCIe Module Partner responds with {SBINIT done resp} sideband message. When a UCIe Module has sent and received the {SBINIT done resp} sideband 
message, the UCIe Module must exit to MBINIT. The following additional rules apply when the 
transmitting/receiving chiplet supports Manageme nt Transport protocol. These additional rules 
are required to initiate mainband link training for the scenario in which the Management Transport 
path has already been established prior (i.e., SB_MGMT_UP flag is set to 1) and one of the 
mainband link training triggers (see Section 4.5 ) occurred with the Link Training State Machine in 
RESET state. CKSB sampling DATASB = Result[0] # 1: Detected; 0: Not detected  
CKSBRD sampling DATASB = Result[1] # 1: Detected; 0: Not detected 
CKSB sampling DATASBRD = Result[2] # 1: Detected; 0: Not detected 
CKSBRD sampling DATASBRD = Result[3] #  1: Detected; 0: Not detected 
 
IF (Result[3:0] == XXX1): 
Sideband = (DATASB/CKSB) 
ELSE IF (Result[3:0] == XX10): 
Sideband = (DATASB/CKSBRD) 
ELSE IF (Result[3:0] == X100): 
Sideband = (DATASBRD/CKSB) 
ELSE IF (Result[3:0] ==1000): 
Sideband = (DATASBRD/CKSBRD) 
Else: 
Sideband is not functional  
--- Page 38 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 134
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 — If the Module partner that is receiving the {SBINIT done req} sideband message is in RESET 
state and is ready to proceed with mainband init ialization, the module partner must transition 
to SBINIT state, respond with an {SBINIT do ne resp} sideband message, and then send a 
{SBINIT done req} sideband message.
— Module partner must ignore a received {SBINI T done req} sideband message if the module 
partner is EITHER [in RESET state but not yet re ady to proceed with mainband initialization] 
OR [in a state machine state other than RESET/SBINIT].
— UCIe Module that is transmitting the {SBINIT done req} sideband message must transition to 
RESET state (by way of TRAINERROR state) if the UCIe Module did not receive a response 
within the regular 8-ms time window. In that  scenario, the UCIe Module can choose to re-
issue the {SBINIT done req} sideband message af ter transitioning to SBINIT state again from 
RESET state. The UCIe Module can repeat this  process N number of times before waiting in 
RESET for a new training trigger. (The value of N is implementation-dependent.) The UCIe 
Module partner must collapse multiple outstanding {SBINIT done req} sideband messages 
and respond only with a single {SBINIT done resp} sideband message.
The next state is mainband initialization (MBINIT) if sideband message exchange is successful.SBINIT sequence for Standard Package where interconnect Lane redundancy and repair are not 
supported is as follows:
1. The UCIe Module must start and continue to send iterations of 64 UI clock pattern (a clock pattern 
is defined as starting with 1b and toggling every UI of transmission, i.e., 1010...) and 32 UI low 
on its sideband Transmitter (
TXDATASB ). The UCIe Module must send strobe on its sideband clock 
(TXCKSB ) during the 64-UI clock pattern duration and gated (held low) otherwise.
2. The UCIe Module Partner must sample incoming data pattern with incoming clock.
3. Sideband pattern detection is considered su ccessful if 128 UI clock pattern is detected.
4. If the UCIe Module successfully detects the pa ttern, it stops sending data and clock on its 
sideband Transmitters after four more iterations of pattern in Step 1 . This will allow for any time 
differences in both UCIe Modules coming out of  RESET. The UCIe Module sideband Transmitter 
and Receiver must now be enabled to send and receive sideband messages, respectively.
5. If pattern is not detected on its sideband Re ceiver, the UCIe Module continues to alternate 
between sending the pattern on its Transmitters for 1 ms, and holding low for 1 ms, for a total of 
8 ms. The sideband Receiver must be enabled duri ng this time. Timeout occurs after 8 ms. If a 
timeout occurs, the UCIe Module must exit to TR AINERROR. If a pattern is detected successfully 
at any time, as described in Step 3 , the UCIe Module enables sideband message transmission as 
described in Step 4  and continues to Step 6 .
6. Once sideband detection is successful ( Step 5 ), the UCIe Module must start and continue to send 
{SBINIT Out of Reset} sideband message on TXDATASB  while sending TXCKSB  until it detects the 
same message in its sideband Receivers or a timeout occurs.
7. If {SBINIT Out of Reset} sideband message dete ction is successful, the UCIe Module must stop 
sending the message. Any sideband message exchange can now be performed.
8. The UCIe Module must send the {SBINIT done  req} sideband message. If this message is 
received successfully, the UCIe Module Partner re sponds with the {SBINIT done resp} sideband 
message. When the UCIe Module has sent and received the {SBINIT done resp} sideband 
message, the UCIe Module must exit to MBINIT. The following additional rules apply when the 
transmitting/receiving chiplet supports Manageme nt Transport protocol. These additional rules 
are required to initiate mainband link training for the scenario in which the Management Transport 
path has already been established prior (i.e., SB_MGMT_UP flag is set to 1) and one of the mainband link training triggers (see Section 4.5 ) occurred with the Link Training State Machine in 
RESET state.
--- Page 39 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 135
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 — If the Module partner that is receiving the {SBINIT done req} sideband message is in RESET 
state and is ready to proceed with mainband init ialization, the module partner must transition 
to SBINIT state, respond with an {SBINIT do ne resp} sideband message, and then send a 
{SBINIT done req} sideband message.
— Module partner must ignore a received {SBINIT done req} sideband message if the module 
partner is EITHER [in RESET state but not yet re ady to proceed with mainband initialization] 
OR [in a state machine state other than RESET/SBINIT].
— UCIe Module that is transmitting the {SBINIT done req} sideband message must transition to 
RESET state (by way of TRAINERROR state) if the UCIe Module did not receive a response 
within the regular 8-ms time window. In that  scenario, the UCIe Module can choose to re-
issue the {SBINIT done req} sideband message af ter transitioning to SBINIT state again from 
RESET state. The UCIe Module can repeat this  process N number of times before waiting in 
RESET for a new training trigger. (The value of N is implementation-dependent.) The UCIe 
Module partner must collapse multiple outstanding {SBINIT done req} sideband messages 
and respond only with a single {SBINIT done resp} sideband message.
The next state is mainband initialization (MBINIT) if sideband message exchange is successful. For 
the remainder of initialization and operations, when  not transmitting sideband packets, sideband 
Transmitters are held Low and sideband Receivers are enabled.
4.5.3.3 MBINIT
In this state, the mainband (MB) interface is initialized and repaired or width degraded (when 
applicable). The data rate on the mainband is set to the lowest supported data rate (4 GT/s).
For Advanced Package interconnect repair may be needed. Su b-states in MBINIT allows detection 
and repair of data, clock, track and valid Lanes. For Standard Package , where no Lane repair is 
needed, sub-states are used to check functionality at lowest data rate and width degrade if needed.
--- Page 40 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 136
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3.3.1 MBINIT.PARAM
This state is used to perform exchange of para meters that are required to set up the maximum 
negotiated speed and other PHY settings. Mainband  Transmitters remain tri-stated and mainband 
Receivers are permitted to be disabled. The follow ing parameters are exchanged over sideband with 
UCIe Module Partner:
• “Voltage swing”: The five bit value indicates the Transmitter voltage swing to the UCIe Module 
Partner. The UCIe Module Partner must use this value and its Receiver termination information to 
set the reference voltage (Vref) for its Receiver s. The corresponding bits in the {MBINIT.PARAM 
configuration resp} sideband message are reserved.
• “Maximum Data Rate”: The four bit value indicates the Maximum supported Data rate to the UCIe 
Module Partner. This value must take into consideration all the required features at the data rate (BER, CRC/Retry, quadrature clock phase support etc.). The UCIe Module Partner must compare 
this value with its supported maximum data rate and must respond with the maximum common 
data rate encoding in the {MBINIT.PARAM config uration resp} sideband message. For example, a 
UCIe Module is 8 GT/s capable while the UCIe Module Partner advertises 16 GT/s, the UCIe 
Module must pick 8 GT/s and send it back in response.
• “Clock Mode”: The one bit value indicates the UCIe Module’s request to the UCIe Module Partner 
for a strobe or continuous clock. The UCIe Module Partner must use this information to set up the Figure 4-34. MBINIT: Mainband Initialization and Repair Flow
RepairCLK
RepairVAL
RepairMBFrom SBINIT
To MBTRAINCal
ReversalMBPARAM
--- Page 41 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 137
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 clock mode on its clock Transmitter. The {MBINIT.PARAM configuration resp} sideband message 
must reflect the same value. Continuous clock mode  requires the clock to be free running and is 
enforced after receiving the {MBTRAIN.RXCLKCAL start req} sideband message from the UCIe 
Module Partner. The clock remains free runni ng through the remainder of MBTRAIN (unless 
MBTRAIN.LINKSPEED is exited due to errors) and in ACTIVE.
• “Clock Phase”: The one bit value indicates the UCIe  Module’s request to UCIe Module Partner for 
the Clock Phase support on UCIe Module’s forwarde d clock. This should on ly be set 1b if the 
maximum data rate advertised is permitted to do so (see Table 5-8 ). The corresponding bit in the 
{MBINIT.PARAM configuration resp} sideband message  must be set to 1b if this was requested 
and the operational data rate allows it.
• “Module ID”: The UCIe Module sends its “Modul e ID”. This can be used by the UCIe Module 
Partner if in a multi-module configuration for By te mapping, Module enable/disable information 
etc. The corresponding bits in the {MBINIT.PA RAM configuration resp} sideband message are 
reserved.
• “UCIe-A x32”: This bit is set to 1b when APMW  bit in DVSEC UCIe Link Capability register (see 
Section 9.5.1.4 ) is set to 1b (OR) ‘Force x32 width mode in x64 Module’ in the PHY Control 
register (see Section 9.5.3.23 ) is set; otherwise, the bit is se t to 0b. If a x64 Advanced Package 
module supports width reduction to interoperate with a x32 Advanced Package Module, it uses 
this information from its link partner to condit ion the results during MBINIT.REVERSALMB. The 
corresponding bits in the {MBINIT.PARAM configuration resp} sideband message are reserved.
• “UCIe-S x8”: This bit is set to 1 in message  {MBINIT.PARAM configuration req} when bit 20, 
SPMW, in the DVSEC UCIe Link Capability register (see Section 9.5.1.4 ) is set to 1 (OR) ‘Force x8 
Width’ bit is set to 1 in the PHY Control register (see Section 9.5.3.23 ). Otherwise, this bit is set 
to 0. See Section 4.5.3.3.6  for how this bit is used. The corresponding bit in the {MBINIT.PARAM 
configuration resp} sideband message is reserved.
• “Sideband Feature Extensions”: This bit is set to  1 if the transmitter supports sideband feature 
extensions (see Section 4.5.3.3.1.1 ).
Following is the sequence for parameter exchange:
1. The UCIe Module sends the {MBINIT.PARAM conf iguration req} sideband message to exchange 
parameters with the UCIe Module Partner.
2. After the {MBINIT.PARAM configuration req} sideband message is received, the UCIe Module 
Partner resolves and responds with the {MBINIT.PARAM configuration resp} sideband message.
3. After the UCIe Module has sent and received the {MBINIT.PARAM configuration resp} sideband 
message, the UCIe Module must exit to MBINIT.CAL.
It is strongly recommended that if interoperable parameters are not negotiated, then hardware maps 
this scenario to an Internal Error in the Error Log 1 register and transition the LTSM to TRAINERROR, 
RDI to LINKERROR, and assert pl_trainerror  on RDI. For a multi-module Link, all the parameters 
except “Module ID” must be the same for all the modu les, and if this is not the case, it is strongly 
recommended that hardware maps this scenario to the same error escalation path.
--- Page 42 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 138
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 When management transport is supported, the additi onal conditions required for the Link training 
state machine to exit MBINIT.PARAM state to MBINIT.CAL are:
• Management Transport was not negotiated.• (OR) Management Transport was negotiated and it was either initialized successfully or an error 
was detected during initialization.
• (OR) SB_MGMT_UP flag is already set on entry into MBINIT state
AND
There is no MBINIT Stall condition (see Section 4.5.3.3.1.2 ) 
ANDPort is ready to train mainband.
4.5.3.3.1.1 Management Transport Path Negotiation
Management Transport protocol over the sideband is optional and chiplets use the mechanism 
described in this section to negotiate support for it. A sample negotiation flow is shown in Figure 4-35  
for a single module design. Sideband Feature Extensions Supported (SFES) is bit 14 in the 
{MBINIT.PARAM configuration req} sideband message (see Table 7-11 ). Note that MBINIT.PARAM 
state handshake relating to manage ment path negotiation described in this section, is performed on 
all transitions through the MBINIT stat e. If SB_MGMT_UP flag is set (see Section 8.2.3.1.2  for when 
this happens) at entry into MBINIT state, manageme nt transport traffic continues without interruption 
in the MBINIT.PARAM state.
Figure 4-35. Example Sideband Manageme nt Transport Protocol Negotiation – 
Single-module ScenarioChiplet 0Chiplet 1
Negotiation Phase 
Complete (i.e., Chiplet 0 
can start Initialization 
Phase)Negotiation Phase 
Complete (i.e., Chiplet 1 
can start Initialization 
Phase)
--- Page 43 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 139
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 • Unless otherwise specified, a chiplet can optiona lly check for violation of any Negotiation Phase 
rules (discussed in the subsequent bullets), and wh en a violation is detected, the chiplet initiates 
a TRAINERROR handshake (see Section 4.5.3.8 ) to return the LTSM to RESET state.
• Sideband Feature Extensions Supported (SFES) bit in the {MBINIT.PARAM configuration req} 
sideband message (see Table 7-11 , it is bit [14] in the message) is defined to indicate support for 
extended sideband features (of which Management  Transport is one), during MBINIT.PARAM state 
of link training.
— 0 => Sideband Feature Extensions are not supported, 1 => Sideband Feature Extensions are 
supported.
— All modules in a multi-module design must have the same value for this bit in the Req 
message.
— After the SB_MGMT_UP flag is set, the valu e of this bit must remain the same on all 
subsequent transitions through the MBINIT.PARAM state, until that flag is cleared.
• If the Remote link partner supports sideband featur e extensions and it received the SFES bit set 
to 1 in the {MBINIT.PARAM configuration req} si deband message, the Remote link partner will set 
SFES bit in the {MBINIT.PARAM configuration resp} sideband message that it sends out; 
otherwise, the bit is cleared to 0 in the resp message.
— All modules in a multi-module design must ha ve the same value for this bit in the resp 
message.Figure 4-36. Example Sideband Manageme nt Transport Protocol Negotiation – 
Two-module Scenarioa
a. Solid lines are for Module 0. Dashed lines are for Module 1.
Chiplet 0Chiplet 1
Negotiation Phase 
Complete i.e., Chiplet 0 
can start Initialization 
PhaseNegotiation Phase 
Complete i.e., Chiplet 1 
can start Initialization 
Phase
--- Page 44 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 140
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 • If the SFES bit in the {MBINIT.PARAM configuration resp} sideband message is received as set to 
1 across all modules, then the chiplet negotiates the next level of details of extended sideband 
features supported with remote link partner. If  the SFES bit in the {MBINIT.PARAM configuration 
resp} sideband message is received as cleared to 0 in any module, then MBINIT.PARAM state is exited to MBINIT.CAL.
— {MBINIT.PARAM SBFE req} sideband message (see Table 7-11 ) is sent to the remote link 
partner on all modules which then sends ba ck an {MBINIT.PARAM SBFE resp} sideband 
message on all modules. This handshake happens independently in each direction.
o SBFE Req[0]/Resp[0] (also referred to as the MTP bit) indicates support for transmission/
reception of Management Port Messages. Remote  link partner must set the MTP bit in the 
{MBINIT.PARAM SBFE resp} sideband message if it was set in the {MBINIT.PARAM SBFE 
req} sideband message, and it supports re ceiving Management Encapsulation messages.
o After the SB_MGMT_UP flag is set to 1, the va lue of this bit must remain the same on all 
subsequent transitions through the MBINIT.PARAM state, until that flag is cleared to 0.
• When negotiating SFES in {MBINIT.PARAM configur ation req/resp}, if a chiplet advertised SFES 
support in the Req message, the chiplet must also  advertise that support in the Resp message 
provided the associated Req message had that capability advertised. If the chiplet did not 
advertise SFES support in the Req message, then the chiplet must not advertise that support in 
the Resp message.
• For a multi-module UCIe Link, the negotiat ion is performed independently per module.
— A Physical Layer implementation may advertise MTP bit in the SBFE Req message only on a 
subset of the modules.
Note: A message sent on a given Module ID could be received on a different Module ID on the 
partner sideband Receiver. Hence all sideband  links in a multi-module design must be 
capable of receiving MPMs even if they are lim ited to only supporti ng transmit of these 
messages on a subset of sideband links. See Figure 4-37  and Figure 4-38  for examples 
of multi-module transmit/receive sce narios that illustrate this point.
• After the {MBINIT.PARAM SBFE resp} sideband me ssage has been transmitted to the remote link 
partner and {MBINIT.PARAM SBFE resp} sideband message has been received from the remote 
link partner are complete (successfully or unsuccessfully) during MBINIT.PARAM across all 
modules, the PHY informs the Management Port Gateway of the following:
— Negotiated link count with management transport support on the transmit side, using the 
pm_param_local_count[N-1:0]  signals (see Section 10.1  for more details) at the end of 
the negotiation phase. This is the value RxQ-Loca l. A link is considered to have negotiated 
management transport support on the tran smit side if the link transmitted the 
{MBINIT.PARAM SBFE req} sideband message wi th the MTP bit set to 1 and received the 
corresponding {MBINIT.PARAM SBFE resp} sideband message with its MTP bit also set to 1.
— Negotiated link count with management transport support on the receive side, using the 
pm_param_remote_count[N-1:0]  signals (see Section 10.1  for more details). This is the 
value RxQ-Remote. A link is considered to have  negotiated management transport support on 
the receive side if the link received the {MBI NIT.PARAM SBFE req} sideband message with the 
MTP bit set to 1 and transmitted the corresp onding {MBINIT.PARAM SBFE resp} sideband 
message with its MTP bit also set to 1.
• A module must be able to receive in itialization phase-related messages (see Section 8.2.3.1.2 ) 
once it has transmitted {MBINIT.PARAM SBFE resp}.
• Negotiation phase ends when {MBINIT.PARAM SBFE  resp} has been sent and received across all 
modules.
--- Page 45 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 141
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 • While in SBINIT state, if the SB_MGMT_UP flag transitioned from 1 to 0, the chiplet must move 
the LTSM to TRAINERROR state -> RESET state.
• While in MBINIT state, if the SB_MGMT_UP flag tr ansitioned from 1 to 0, the chiplet must perform 
a TRAINERROR handshake and move the LTSM to TRAINERROR state -> RESET state.
4.5.3.3.1.2 MBINIT Stall Capability
To support firmware download and other functionalit y that might have to be configured before the 
mainband link can start training, a capability is pr ovided to “pause” the MBINIT state machine after 
the PARAM sub-state has completed.
This is an optional capability that is enabled on ly when both chiplets have indicated support for 
Sideband Feature Extensions as described in Section 4.5.3.3.1.1 .Figure 4-37. Example Sideband MPM Logical Flow  with Two Modules and No Module Reversal
Figure 4-38. Example Sideband MPM Logical Fl ow with Two Modules and Module ReversalTx for far-
end RxQ-
ID=0
Tx for far-
end RxQ-
ID=1RxQ-ID=0
RxQ-ID=1Management
Port GatewayPHY
Module 0
Module 1RxQ-ID=0
RxQ-ID=1Tx for far-
end RxQ-
ID=0
Tx for far-
end RxQ-
ID=1Management
Port GatewayPHY
Module 0
Module 1SB
SB
Chiplet 0 Chiplet 1
Chiplet 0 Chiplet 1Tx for far-
end RxQ-
ID=0
Tx for far-
end RxQ-
ID=1RxQ-ID=0
RxQ-ID=1Management
Port GatewayPHY
Module 0
Module 1RxQ-ID=1
RxQ-ID=0Tx for far-
end RxQ-
ID=1
Tx for far-
end RxQ-
ID=0Management
Port GatewayPHY
Module 1
Module 0SB
SB
--- Page 46 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 142
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 To “pause” link training after MBINIT.PARAM, either  side can send a “Stall” encoding of FFFFh in the 
MsgInfo field of the {MBINIT.PARAM SBFE resp} side band message. For example, if a chiplet needs to 
download firmware by way of the partner port before the chiplet can bring up the mainband, the 
partner port can respond with “stall” encoding as st ated above. Stall encoding instructs the other side 
to pause and not move beyond the MBINIT.PARAM state. The payload in the {MBINIT.PARAM SBFE 
resp} sideband message with stall encoding is st ill valid and must be accurate to the responder’s 
capabilities. An {MBINIT.PARAM SBFE resp} sideba nd message with “Stall” encoded must be sent 
once every 4 ms until the sender determines that it no longer needs to stall, at which time the sender 
either sends the {MBINIT.PARAM SBFE resp} message without the stall encoding (in which case the state machine advances to MBINIT.CAL state if other conditions allow (see Section 8.2.3.1.2 )), OR the 
sender does not send an {MBINIT.PARAM SBFE re sp} sideband message, the link times out, and the 
link transitions from TRAINERROR state to RESET state and starts over again.
It is legal for one side to indicate a stall and the other side to not indicate a stall. In that case, both 
sides are stalled. It is also valid for either side to explicitly request an entry to TRAINERROR state 
while in MBINIT.PARAM state. This can occur if either side is not yet ready to train the mainband.
See Section 4.5.3.3.1.3  for details of what happens at the end of MBINIT.PARAM when either end is a 
sideband-only port.
Support for receiving an {MBINIT.PARAM SBFE resp} sideband message with “stall” encoding is 
required in all ports that advertise the SFES bit set to 1 in the {MBINIT.PARAM configuration req} 
sideband message. Support for tran smitting the {MBINIT.PARAM SBFE resp} sideband message with 
“stall” encoding is implementation-dependent. For ex ample, if a design needs to support the firmware 
download feature, the design can support this ca pability if the design cannot complete firmware 
download within 8 ms.
Figure 4-39  shows a scenario in which the link training state machine initially moves through 
RESET -> SBINIT -> MBINIT.PARAM with “stall” -> TRAINERROR -> RESET. During this phase, a 
chiplet “stalls” in MBINIT.PARAM for additional In it time, such as for down loading chiplet firmware. 
When the chiplet Init is complete, the chiplet ei ther initiates entry to TRAINERROR state with a 
TRAINERROR handshake message, OR the chiplet ca n stop sending the {MBINIT.PARAM SBFE resp} 
sideband message with “stall” encoding, which wo uld eventually trigger entry to TRAINERROR state 
initiated by the partner chiplet. In the second ph ase, the state machine moves through to SBINIT -> 
MBINIT.PARAM without “stall” -> MBINIT.CAL, thus training the mainband. This flow is useful for 
scenarios in which a chiplet potentially needs to ch ange the advertised parameters for Link training 
after chiplet Init. Note that the transition to TR AINERROR in this case does not escalate to RDI 
transitioning to LinkError (or 
pl_trainerror  assertion on RDI).
--- Page 47 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 143
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Figure 4-39. MBINIT “Stall” Example 1
RESET
SBINITTRAINERROR
MBINIT.CALPhase 
1
...Phase 
2Sideband Management path setup occurs first, followed by mainband training but 
with an entry to RESET in between. 
“Stall” in MBINIT.PARAM is used to gain additional time for chiplet initialization 
during the first entry to MBINIT.PARAM.
MBINIT.PARAM
(MBINIT.Stall 
mechanism used 
for additional Init 
time in Phase 1)Management Transport path on the 
sideband is negotiated/initialized, chiplet “stalls” in MBINIT.PARAM for additional “Init” time
Mainband is trainedPhase 
1
Phase 
2
--- Page 48 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 144
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Figure 4-40  shows a scenario in which the link training state machine initially moves through 
RESET -> SBINIT -> MBINIT.PARAM with “stall”. The chiplet “stalls” in MBINIT.PARAM for additional 
Init time. After the chiplet Init is complete, the chiplet sends an {MBINIT.PARAM SBFE resp} sideband 
message without a “stall” encoding that triggers state machine entry to MBINIT.CAL. Mainband training resumes from that point.
Figure 4-40. MBINIT “Stall” Example 2
RESET
SBINITTRAINERROR
MBINIT.CAL
...Phase 
1Sideband Management path setup occurs first, followed by mainband training 
without re-entering RESET state. 
“Stall” in MBINIT.PARAM is used to gain additional time for chiplet initialization 
before training the mainband.
Phase 
2MBINIT.PARAM
(MBINIT.Stall 
mechanism used 
for additional Init 
time in Phase 1)Management Transport path on the 
sideband is negotiated/initialized, chiplet “stalls” in MBINIT.PARAM for additional “Init” time
Mainband is trainedPhase 
1
Phase 
2
--- Page 49 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 145
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3.3.1.3 UCIe-S Sideband Only (SO) Port
A UCIe-S Sideband-only port will advertise the SF ES bit in an {MBINIT.PARAM configuration req} 
sideband message. If that negotiation is successf ul, the port advertises bit 2 (SO bit) in an 
{MBINIT.PARAM SBFE req} sideband message to indica te that the port is a “Sideband-only port”. If 
the port receives an {MBINIT.PARAM SBFE resp} side band message with the SO bit set to 1, training 
pauses on both sides at the exit of the MBINIT.P ARAM phase until the next Management Reset or a 
transition to the TRAINERROR state is triggered (see Section 4.5.3.8 ). State residency timeout is 
disabled in MBINIT.PARAM. If the remote link part ner did not set the SO bit in the {MBINIT.PARAM 
SBFE resp} sideband message, the link goes to the TRAINERROR state. This is an SiP integration error 
and is fatal. All links that support  management transport over sideband (i.e., those links that set bit 0 
as 1 in the {MBINIT.PARAM SBFE req} sideband message that they transmit) must set the SO bit to 1 in the {MBINIT.PARAM SBFE resp} sideband messa ge that they transmit, provided that the 
corresponding bit was set to 1 in the {MBINIT. PARAM SBFE req} sideband message that they 
received.
In multi-sideband-only Link configuration (this refers to a multi-module configuration with sideband-
only modules; see Section 8.2.1 ), the chiplet must advertise the same value for the SO bit in the 
{MBINIT.PARAM SBFE req} or {MBINIT.PARAM SBFE resp} sideband message across all links. Receivers can optionally check for violation of this rule and then trigger a transition to the 
TRAINERROR state if the transmitter violates this rule.
4.5.3.3.2 MBINIT.CAL
This state is used to perform any calibration needed (e.g., Tx Duty Cycle correction, Receiver offset 
and Vref calibration). This state is common for both Advanced Package  and Standard Package .
1. The UCIe Module maintains tri-state on all it s mainband Transmitters, and mainband Receivers 
are permitted to be disabled in this state.  The UCIe Module is permitted to perform 
implementation specific steps for Transmitter and Receiver calibration.
2. The UCIe Module must send the {MBINIT.CAL Done req} sideband message, and then wait for a 
response. If this message is received successful ly, the UCIe Module Partner responds with the 
{MBINIT.CAL Done resp} sideband message. Once  the UCIe Module has sent and received 
{MBINIT.CAL Done resp}, it must exit to MBINIT.REPAIRCLK.
4.5.3.3.3 MBINIT.REPAIRCLK
This sub-state is used to detect and apply repair (if needed) to clock and track Lanes for Advanced 
Package  and for functional check of clock and track Lanes for Standard Package .
Following is the sequence for Advanced Package :
Clock repair mapping is described in Section 4.3 . Each clock, track and their redundant physical Lanes 
(
TCKP_P/RCKP_P , TCKN_P/RCKN_P , TTRK_P/RTRK_P , and TRDCK_P/RRDCK_P ) are independently 
checked to detect possible electrical opens or el ectrical shorts between the two clock pins. Single-
ended clock Receivers or independent detection mechanism is required to ensure clock repair. The 
UCIe Module must enable Transmitters and Receiver s on Clock, Track and their redundant Lanes. All 
other Transmitters are maintained in tri-state and Receivers are permitted to be disabled.
1. The UCIe Module sends the {MBINIT.REPAIRCLK init req} sideband message and waits for a 
response. The UCIe Module Partner when ready to receive pattern on RCKP_L , RCKN_L , RTRK_L , 
and RRDCK_L  responds with {MBINIT.REPAIRCLK init resp}.
2. The UCIe Module must now send 128 iterations of clock repair pattern (16 clock cycles followed 
by 8 cycles of low) on its TCKP_L  only (TCKN_L , TTRK_L , and TRDCK_L  are tri-stated). Clock 
repair pattern must not be scrambled.
--- Page 50 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 146
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 3. The UCIe Module Partner detects this pattern on RCKP_L , RCKN_L , RTRK_L , and RRDCK_L . 
Detection is considered successful if at least 16 consecutive iterations of clock repair pattern are 
detected. The UCIe Module Partne r logs the detection result for RCKP_L , RCKN_L , RTRK_L , and 
RRDCK_L .
4. The UCIe Module after completing pattern transmission sends {MBINIT.REPAIRCLK result req} 
sideband message to get the logged result and waits for a response.
5. The UCIe Module Partner responds with {MBINI T.REPAIRCLK result resp} sideband message with 
log result of RCKP_L , RCKN_L , RTRK_L , and RRDCK_L . If detection is successful on RCKP_L  only 
and not on any of RCKN_L , RTRK , and/or RRDCK_L , no repair is needed. Else if detection is 
unsuccessful on any of RCKP_L , RCKN_L , RTRK_L , and RRDCK_L , repair is needed on the physical 
Lane TCKP_P/RCKP_P . Else an electrical short is implied.
6. After receiving the {MBINIT.REPAIRCLK result resp} sideband message, the UCIe Module sends 
the sideband message {MBINIT.REPAIRCLK init re q} and waits for a response. The UCIe Module 
Partner when ready to receive pattern on RCKP_L , RCKN_L , RTRK_L , RRDCK_L  responds with 
{MBINIT.REPAIRCLK init resp}.
7. After receiving the {MBINIT.REPAIRCLK init resp } sideband message, the UCIe Module must send 
128 iterations of clock repair pattern (16 clock cycles followed by 8 cycles of low) on its TCKN_L  
only. (TCKP_L , TTRK_L , and TRDCK_L  are tri-stated)
8. The UCIe Module Partner detects this pattern on all RCKP_L , RCKN_L , RTRK_L , and RRDCK_L . 
Detection is considered successful if at least 16 consecutive cycles of clock repair pattern are 
detected. The UCIe Module Partne r logs the detection result for RCKP_L , RCKN_L , RTRK_L , and 
RRDCK_L .
9. The UCIe Module after completing the pattern  transmission, sends {MBINIT.REPAIRCLK result 
req} sideband message to get the logged result.
10. The UCIe Module Partner on receiving it respon ds with {MBINIT.REPAIRCLK result resp} sideband 
message with logged result of RCKP_L , RCKN_L , RTRK_L , and RRDCK_L . If detection is successful 
on RCKN_L  and not on RCKP_L , RTRK_L , RRDCK_L , no repair is needed. Else if detection is 
unsuccessful on any of RCKP_L , RCKN_L , RTRK_L , and RRDCK_L , repair is needed on the physical 
Lane TCKN_P/RCKN_P . Else an electrical short is implied.
11. After receiving the {MBINIT.RE PAIRCLK result resp} sideband message, the UCIe Module sends 
the sideband message {MBINIT.REPAIRCLK init re q}. The UCIe Module Partner when ready to 
receive pattern on RCKP_L , RCKN_L , RTRK_L , RRDCK_L  responds with {MBINIT.REPAIRCLK init 
resp}.
12. After receiving the {MBINIT.REPAIRCLK init re sp} sideband message, the UCIe Module sends 128 
iterations of clock repair pattern (16 clock cycles followed by 8 cycles of low) on TRDCK_L  only. 
(TCKP_L , TTRK_L , and TCKN_L  tri-stated)
13. The UCIe Module Partner detects this pattern on all RCKP_L , RCKN_L , RTRK_L , and RRDCK_L . 
Detection is considered successful if at least 16 consecutive cycles of clock repair pattern are 
detected. The UCIe Module Partne r logs the detection result for RCKP_L , RCKN_L , RTRK_L , and 
RRDCK_L .
14. The UCIe Module device after completing th e pattern transmission sends {MBINIT.REPAIRCLK 
result req} sideband message to get the logged result.
--- Page 51 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 147
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 15. The UCIe Module Partner responds with {MBINI T.REPAIRCLK result resp} sideband message with 
logged result of RCKP_L , RCKN_L , RTRK_L , and RRDCK_L . If detection is successful only on 
RRDCK_L  and not on RCKP_L , RTRK_L , RCKN_L , TRDCK_P/RRDCK_P  is available as a repair 
resource. Else if detection is unsuccessful on any of RCKP_L , RCKN_L , RTRK_L , and RRDCK_L , 
the physical Lane TRDCK_P/RRDCK_P  is not available as a repair resource. Else an electrical short 
is implied.
16. After receiving the {MBINIT.RE PAIRCLK result resp} sideband message, the UCIe Module sends 
the sideband message {MBINIT.REPAIRCLK init re q} and waits for a response. The UCIe Module 
Partner when ready to receive pattern on RCKP_L , RCKN_L , RTRK_L , RRDCK_L  responds with 
{MBINIT.REPAIRCLK init resp}.
17. After receiving the {MBINIT.REPAIRCLK init re sp} sideband message, the UCIe Module sends 128 
iterations of clock repair pattern (16 clock cycles followed by 8 cycles of low) on TTRK_L  only. 
(TCKP_L , TCKN_L , and TRDCK_L  are tri-stated).
18. The UCIe Module Partner detects this pattern on all RCKP_L , RCKN_L , RTRK_L , and RRDCK_L . 
Detection is considered successful if at least 16 consecutive cycles of clock repair pattern are 
detected. The UCIe Module Partne r logs the detection result for RCKP_L , RCKN_L , RTRK_L , and 
RRDCK_L .
19. The UCIe Module after completing pattern transmission sends {MBINIT.REPAIRCLK result req} 
sideband message to get the logged result and waits for a response.
20. The UCIe Module Partner stops comparison and responds with {MBINIT.REPAIRCLK result resp} 
sideband message with logged result of RCKP_L , RCKN_L , RTRK_L , and RRDCK_L . If detection is 
successful only on RTRK_L  and not on RCKP_L , RCKN_L , RRDCK_L , no repair is needed. Else if 
detection is unsuccessful on any of RCKP_L , RCKN_L , RTRK_L , and RRDCK_L , repair is needed on 
the physical Lane TTRK_P/RTRK_P . Else an electrical short is implied.
21. Clock or Track is unrepairable if any of the following are true:
— If repair is needed on any two of RCKP_L , RCKN_L , and RTRK_L
— Electrical short is detected—
RRDCK_L  is unavailable for repair when repair is needed
If the clock or track is unrepairable, the UCIe Module and UCIe Module Partner must exit to 
TRAINERROR after performing TRAINERROR handshake (see Section 4.5.3.8 ).
If repair is required on only one of the clock or track lanes and a repair resource is available, then 
the UCIe Module applies repair on its clock/tr ack Transmitter and sends the {MBINIT.REPAIRCLK 
apply repair req} sideband message with repair in formation. If a repair is needed for one of the 
clock or track pins ( CKP, CKN, or TRK) and a repair resource is available, repair is applied as 
described in Section 4.3 . The UCIe Module Partner applies repair and sends {MBINIT.REPAIRCLK 
apply repair resp} sideband message.
22. If a repair is applied, UCIe Mo dule must check the repair success by applying clock repair pattern 
and checking on the Receiver.
a. The UCIe Module sends sideband message {M BINIT.REPAIRCLK check repair init req} to 
initiate check repair and waits for a response. The UCIe Module Partner responds with sideband 
message {MBINIT.REPAIRCLK check repair init re sp} and is ready to receive and check clock 
repair pattern.
b. After receiving the {MBINIT.RE PAIRCLK check repair init resp} sideband message, the UCIe 
Module sends 128 iterations of clock repair pattern (16 clock cycles followed by 8 cycles of low) 
on TCKP_L . The UCIe Module Partner detects this pattern RCKN_L , RCKP_L , RTRK_L . 
Detection is considered successful if at least 16 consecutive cycles of clock repair pattern are 
detected. The UCIe Module requests for chec k result request using the sideband message 
--- Page 52 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 148
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 {MBINIT.REPAIRCLK check results req} and th e UCIe Module Partner responds with the 
sideband message {MBINIT.REPAIRCLK check results resp}. Repair is considered successful if 
pattern is detected only on RCKP_L . If repair is unsuccessful, the UCIe Module and UCIe 
Module Partner must exit to TRAINERROR after performing TRAINERROR handshake (see 
Section 4.5.3.8 ).
c.Step a  and Step b  are repeated for TCKN_L  and TTRK_L .
23. If repair is successful or repair is not requir ed, the UCIe Module sends {MBINIT.REPAIRCLK done 
req} sideband message and the UCIe Module Pa rtner responds with {MBINIT.REPAIRCLK done 
resp} sideband message. When the UCIe Module has sent and received {MBINIT.REPAIRCLK done 
resp}, it must exit to REPAIRVAL.
For Standard Package , clock and track Lanes are checked for functional operation at the lowest data 
rate. The sequence is as follows:
1. The UCIe Module sends the sideband message {MBINIT.REPAIRCLK init req} and waits for a 
response. When ready to receive pattern on RCKP_L , RCKN_L , and RTRK_L , the UCIe Module 
Partner responds with {MBINIT.REPAIRCLK init  resp}. On receiving the sideband message 
{MBINIT.REPAIRCLK init resp}, the UCIe Module sends 128 iterations of clock repair pattern 
(16 clock cycles followed by 8 cycles of low) on TCKP_L , TCKN_L , and TTRK_L . Clock repair 
pattern must not be scrambled.
2. The UCIe Module Partner detects this pattern on RCKP_L , RCKN_L , and RTRK_L . Detection is 
considered successful if at least 16 consecutive cycles of clock repair pattern are detected. The 
UCIe Module Partner logs the detection result for RCKP_L , RCKN_L , and RTRK_L .
3. After completing pattern transmission, the UCIe  Module sends {MBINIT.REPAIRCLK result req} 
sideband message to get the logged result.
4. The UCIe Module Partner stops comparison and responds with {MBINIT.REPAIRCLK result resp} 
sideband message with logged result of RCKP_L , RCKN_L , and RTRK_L .
5. If detection is unsuccessful on any one of RCKP_L , RCKN_L , and RTRK_L , the UCIe Module and 
UCIe Module Partner must exit to TRAINE RROR after performing TRAINERROR handshake.
6. If detection is successful, the UCIe Module sends {MBINIT.REPAIRCLK done req} sideband 
message and the UCIe Module Partner responds with {MBINIT.REPAIRCLK done resp} sideband 
message. When the UCIe Module has sent and received the sideband message {MBINIT.REPAIRCLK done resp}, it must exit to MBINIT.REPAIRVAL.
4.5.3.3.4 MBINIT.REPAIRVAL
The UCIe Module sets the clock phase at the center of the data UI. The UCIe Module Partner must 
sample the received Valid with the received forwarde d Clock. All Data Lanes must be held low during 
this state. Track and Data Receivers are permitted to be disabled. When not performing the actions 
relevant to this state:
• Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking)
• Clock Receivers are enabled
• When not transmitting the VALTRAIN pattern, the transmitters for 
TVLD_L  and TRDVLD_L  are 
disabled (tri-stated)
• The receivers for RVLD_L  and RRDVLD_L  are enabled
This state can be used to detect and ap ply repair (if needed) to Valid Lane for Advanced Package  
and for functional check of Valid for Standard Package .
--- Page 53 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 149
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Following is the sequence for Advanced Package :
1. The UCIe Module sends the sideband message {MBINIT.REPAIRVAL init req} and waits for a 
response. When ready to receive pattern on RVLD_L  and RRDVLD_L , the UCIe Module Partner 
clears any previous comparison results and responds with {MBINIT.REPAIRVAL init resp}.
2. The UCIe Module on receiving {MBINIT.REPAIR VAL init resp} must send 128 iterations of 
VALTRAIN pattern (four 1’s followed by four 0’s) on TVLD_L  along with the forwarded clock. 
VALTRAIN pattern must not be scrambled.
3. The UCIe Module Partner detects pattern on RVLD_L  and RRDVLD_L . Detection is considered 
successful if at least 16 consecutive iterations of VALTRAIN pattern are detected. The Receiver 
logs the detection result for RVLD_L  and RRDVLD_L .
4. After completing the pattern transmission, the UC Ie Module must send {MBINIT.REPAIRVAL result 
req} sideband message and wait to get the logged result.
5. The UCIe Module Partner must respond with {M BINIT.REPAIRVAL result resp} sideband message 
with result in the previous step. If detection is successful on RVLD_L  only and not on RRDVLD_L , 
no repair is needed. If detection is successful on both RVLD_L  and RRDVLD_L  or only on 
RRDVLD_L , the interconnect cannot be repaired. If detection is unsuccessful on both RVLD_L  and 
RRDVLD_L , Valid Lane ( TVLD_P/RVLD_P ) needs repair.
6. After receiving {MBINIT. REPAIRVAL result resp}, Step 1  must be repeated.
7. The UCIe Module sends 128 iterations of VALTRAIN  repair pattern (four 1’s followed by four 0’s) 
on TRDVLD_L  along with the forwarded clock. VALTRAIN pattern must not be scrambled.
8. The UCIe Module Partner detects pattern on RVLD_L  and RRDVLD_L . Detection is considered 
successful if at least 16 consecutive iterations of VALTRAIN pattern are detected. The Receiver 
logs the detection result for RVLD_L  and RRDVLD_L .
9. After completing the pattern transmission, the UC Ie Module must send {MBINIT.REPAIRVAL result 
req} sideband message to get the logged result.
10. The UCIe Module Partner must stop comparison and respond with {MBINIT.REPAIRVAL result 
resp} sideband message with result from the previous step. If detection is successful on 
RRDVLD_L  only and not on RVLD_L , TRDVLD_P/RRDVLD_P is available for repair. If detection is 
successful on both RVLD_L  and RRDVLD_L  or only on RVLD_L , the interconnect cannot be 
repaired. If detection is unsuccessful on both RVLD_L  and RRDVLD_L , TRDVLD_P/RRDVLD_P  is 
not available and cannot be used for Valid Lane repair.
11. If repair is required on ( TVLD_P/RVLD_P ) and repair resource is available, the UCIe Module 
applies repair on its Valid Transmitter (see Section 4.3.7 ) and sends sideband message 
{MBINIT.REPAIRVAL apply repair req} with repair  information. The UCIe Module Partner, after 
receiving the message, must apply repair on its Valid Receiver and must respond with sideband 
message {MBINIT.REPAIRVAL apply repair resp}.
12. If a repair is applied, device must check the repair success by repeating Step 1  through Step 4 .
13. If repair is successful or repair is not required, the UCIe Module must send {MBINIT.REPAIRVAL 
done req} sideband message and the UC Ie Module Partner must respond with 
{MBINIT.REPAIRVAL done resp}. When a UCIe Module has sent and received {MBINIT.REPAIRVAL 
done resp} sideband message, it must exit to REVE RSALMB. Else if repair is unsuccessful or Valid 
Lane is unrepairable (in Step 11 ), the UCIe Module must exit to TRAINERROR after completing 
the TRAINERROR handshake.
--- Page 54 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 150
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 For Standard Package , Valid Lane is checked for functional operation at the lowest data rate. 
Following is the flow:
1. The UCIe Module must send the sideband messa ge {MBINIT.REPAIRVAL init req} and wait for 
a response. The UCIe Module Partner when ready to receive pattern on RVLD_L , must respond 
with {MBINIT.REPAIRVAL init resp}.
2. After receiving the sideband message {MBINIT. REPAIRVAL init resp}, the UCIe Module sends 
128 iterations of VALTRAIN pattern (f our 1’s followed by four 0’s) on TVLD_L  along with the 
forwarded clock.
3. The UCIe Module Partner detects this pattern on RVLD_L . Detection is considered successful 
if at least 16 consecutive iterations of valid repair pattern are detected. The Receiver logs the 
detection result for RVLD_L .
4. After completing pattern transmission, the UCIe Module must send {MBINIT.REPAIRVAL result 
req} sideband message and wait to get the logged result.
5. The UCIe Module Partner must stop comparison and respond with {MBINIT.REPAIRVAL result 
resp} sideband message with result in the previous step.
6. If detection fails, the UCIe Module must ex it to TRAINERROR after completing the TRAINERROR 
handshake.
7. If detection is successful, the UCIe Module must send {MBINIT.REPAIRVAL done req} sideband 
message and the UCIe Module Partner responds with {MBINIT.REPAIRVAL done resp}. When a 
UCIe Module has sent and received {MBINIT.REPAIRVAL done resp} sideband message, it must 
exit to REVERSALMB.
4.5.3.3.5 MBINIT.REVERSALMB
This state is entered only if Clock and Valid Lanes ar e functional. In this state, Data Lane reversal is 
detected. All the Transmitters and Receivers are en abled. The UCIe Module sets the forwarded clock 
phase at the center of the data UI. The UCIe Module  Partner must sample the incoming Data with the 
incoming forwarded clock. The Track Transmitter is he ld low and the Track Receiver is permitted to be 
disabled. When not performing the actions relevant to this state:
• Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking)
• Clock Receivers are enabled
• Data and Valid Transmitters are held low• Data and Valid Receivers are enabled
A 16-bit “Per Lane ID” pattern, shown in Table 4-7 , is a Lane-specific pattern using the Lane ID 
described in Section 4.2.1 . Example of “Per Lane ID” pattern for Lane 1 and Lane 31 are shown in 
Table 4-8 . When “Per Lane ID” pattern is used, it must not be scrambled.
Table 4-7. Per Lane ID Pattern
Pattern 0101 L a n e  I Da
a. Note that bit 0 of Lane ID maps to bit 4 in the Per Lane  ID pattern, bit 1 to bit 5 and so on until bit 7 to bit 11.0101
Bit 01234567891 0 1 1 1 2 1 3 1 4 1 5
--- Page 55 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 151
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Following is the Reversal MB sequence for Advanced Package  and Standard Package :
1. The UCIe Module must send the {MBINIT.REVERS ALMB init req} sideband message. When ready 
to receive “Per Lane ID” pattern and perform per-Lane pattern comparison, the UCIe Module 
Partner must respond with {MBINIT.REVERSALMB init resp}.
2. On Receiving the {MBINIT.RE VERSALMB init resp} sideband  message or entering from Step 8 , the 
UCIe Module must send {MBINIT.REVERSALMB  clear error req} sideband message. Upon 
receiving this message, the UCIe Module Partne r clears any prior errors and responds with 
{MBINIT.REVERSALMB clear error resp}. After re ceiving {MBINIT.REVERSALMB clear error resp}, 
the UCIe Module sends 128 iterations of Per Lane ID pattern (see Table 4-7 ) on all N data Lanes 
with correct Valid framing on the Valid Lane (see Section 5.11  and Section 4.1.2 ) along with the 
forwarded clock. Table 4-7  and Table 4-8  show examples of the Per Lane ID pattern. N is 68 (64 
Data + 4 RD) for a x64 Advanced Package. N is 34 (32 Data + 2 RD) for a x32 Advanced Package. 
N is 16 for a x16 Standard Package. N is 8 for a x8 Standard Package.
3. The UCIe Module Partner must perform a per-Lane compare on its Receivers on all N Lanes (see 
Section 4.4 ). Detection on a Lane is considered successful if at least 16 consecutive iterations of 
“Per Lane ID” pattern are detected. The UCIe Module Partner logs the detection result for its Receiver Lanes to be used for Lane reversal Detection.
4. After sending 128 iterations of “Per Lane ID” pattern, the UCIe Module stops sending the pattern 
and sends {MBINIT.REVERSALMB result req} si deband message to get the logged result.
5. The UCIe Module Partner stops comparison and must respond with {MBINIT.REVERSALMB result 
resp} sideband message with per Lane result (see Table 7-11  for the message format).
6. If majority of the Lanes show success (since some Lanes may need repair), Lane reversal is not 
needed. Skip to Step 11 . Note that if exactly 50% of the Lanes showed success, Lane reversal is 
applied.
7. The UCIe Module applies Lane reversal on its Transmitters (see Section 4.2 ).
8. Following the Lane reversal application on  its Transmitters, the UCIe Module repeats Step 2  
through Step 5 .
9. If majority of Lanes show success, the Lane reve rsal is needed. Lane reversal preserved for rest 
of the device operation. Skip to Step 11 .
10. The UCIe Module must exit to TRAINERRO R after completing the TRAINERROR handshake.
11. The UCIe Module must send {MBINIT.REVERSAL MB done req} sideband message and the UCIe 
Module Partner responds with {MBINIT.REVERSALMB  done resp}. When the UCIe Module has sent 
and received {MBINIT.REVERSALMB done resp} si deband message, it must exit to REPAIRMB.
If a x64 Advanced Package Module that supports in teroperation with a x32 Advanced Package module 
had received “UCIe-A x32” as 1b during parameter ex changes, it must recognize that it is connected 
to a x32 Advanced Package Module and appropriat ely interpret the receiv ed {MBINIT.REVERSALMB 
result resp} sideband message. In this scenario, the x64 applies steps 6 through 9 to lower 32 data 
lane set and 2 repair lane set. The x64 module appl ies Lane reversal (if required) within the lower 32 
data lane set and 2 repair lane set.
If a x32 Advanced Package Module had received “UCI e-A x32” as 0b during parameter exchanges, it 
must recognize that it is connected to a x64 Adva nced Package Module and appropriately interpret the Table 4-8. Per Lane ID Pattern Examples
Lane 1 0101100000 0 0 0 1 0 1
Lane 31 0101111110 0 0 0 1 0 1
Bit 01234567891 0 1 1 1 2 1 3 1 4 1 5
--- Page 56 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 152
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 received {MBINIT.REVERSALMB result resp} sideband  message, looking for majority of success in the 
lower 32 data lane set and 2 repair lane set of th e x64 module (the x64 module will always place the 
results of its receiver on the lower half of its data/repair lane set).
If a x16 Standard Package Module that supports in teroperation with a x8 Standard Package Module 
had its SPMW bit set to 1b OR has transmitted or  received “UCIe-S x8” as 1b during parameter 
exchanges, the x16 Standard Package Module must re cognize that it needs to operate in x8 mode and 
appropriately interpret the receiv ed {MBINIT.REVERSALMB result re sp} sideband message. In this 
scenario, the x16 Standard Package Module applies Step 6  through Step 9  to the lower-8 data-lane 
set. Additionally, the x16 Standard Package Module  applies Lane reversal (if required) within the 
lower-8 data-lane set.
When a x8 Standard Package Module receives the {MBINIT.REVERSALMB result resp} sideband 
message, the module must look for majority of success in the bits that correspond to the lower-8 data-lane set only.
4.5.3.3.6 MBINIT.REPAIRMB
This state is entered only after Lane reversal  detection and application is successful. All the 
Transmitters and Receivers on a UCIe Module are en abled. The UCIe Module sets the clock phase at 
the center of the data UI on its mainband Transmitter for data Lanes (including the redundant Lanes 
for Advanced Package). The UCIe Module Partner mu st sample the incoming Data with the incoming 
forwarded clock on its mainband Receivers for data Lanes (including the redundant Lanes for Advanced Package). The Track Transmitter is held low and the Track Receiver is permitted to be 
disabled. When not performing the actions relevant to this state:
• Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking)
• Clock Receivers are enabled
• Data and Valid Transmitters are held low• Data and Valid Receivers are enabled
In this state, the mainband Lanes are detected and repaired (if needed) for Advanced Package . In 
this state, functional checks and width degrade (if needed) are performed for Standard Package .
Following is the sequence for Advanced Package :
1. The UCIe Module must send the {MBINIT.REPAIR MB start req} sideband message and waits for a 
response. The UCIe Module Partner respon ds with {MBINIT.REPAIRMB start resp}.
2. The UCIe Module device performs Transmitter-in itiated Data-to-Clock point test as described in 
Section 4.5.1.1  on its Transmitter Lanes (all the data Lanes including the redundant Lanes). The 
Receiver must check for the pass/fail criteria on the data Lanes and the redundant Lanes.
a. The transmit pattern must be set up to send 1 28 iterations of continuous mode “Per Lane ID” 
Pattern. “Per Lane ID” pattern must not be scram bled. The Receiver must be set up to perform 
per Lane comparison.
b. Detection on a Receiver Lane is considered successful if at least 16 consecutive iterations of 
“Per Lane ID” pattern are detected.
c. LFSR Reset has no impact in MBINIT.REPAIRMB.
3. The UCIe Module receives the per-Lane pass/fail  information over sideband message at the end 
of Transmitter initiated data to clock point test Step 2 .
--- Page 57 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 153
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4. If Lane repair is required and the necessary repair resources are available, the UCIe Module 
applies repair on its mainband Transmitters for data Lanes as described in Section 4.3.1 , and 
sends {MBINIT.REPAIRMB Apply repair req} side band message. Upon receiving this sideband 
message, the UCIe Module Partner applies repair on its mainband Receivers for data Lanes as 
described in Section 4.3.1 , and sends {MBINIT.REPAIRMB Appl y repair resp} sideband message. 
Otherwise, if the number of  Lane failures are more than repair capability (see Section 4.3 ), the 
mainband is unrepairable and the UCIe Module must exit to TRAINERROR after performing the 
TRAINERROR handshake.
5. If repair is not required, perform Step 7 .
6. If Lane repair is applied ( Step 4 ), the applied repair is checke d by UCIe Module by repeating 
Step 2  and Step 3 . If post repair Lane errors are logged in Step 5 , the UCIe Module must exit to 
TRAINERROR after performing the TRAINERROR ha ndshake. If repair is successful, perform 
Step 7 .
7. The UCIe Module sends {MBINIT.REPAIRMB end req} sideband message and the UCIe Module 
Partner responds with {MBINIT.REPAIRMB end resp }. When UCIe Module has sent and received 
{MBINIT.REPAIRMB end resp}, it must exit to MBTRAIN.
For Standard Package , mainband is checked for functional operation at the lowest data rate. 
Following is the sequence of steps:
1. The UCIe Module sends the {MBINIT.REPAIRMB start req} sideband message and waits for a 
response. The UCIe Module Partner responds wi th the {MBINIT.REPAIRMB start resp} sideband 
message when ready to receive the pattern on its mainband Receivers for data Lanes.
2. The UCIe Module performs Transmitter-initiated Data-to-Clock point test as described in 
Section 4.5 .
a. The transmit pattern must be set up to send 1 28 iterations of continuous mode “Per Lane ID” 
Pattern. The Receiver must be set up to perform per Lane comparison.
b. Detection on a Receiver Lane is considered successful if at least 16 consecutive iterations of 
“Per Lane ID” pattern are detected.
c. LFSR Reset has no impact in MBINIT.REPAIRMB.
3. The UCIe Module must send the {MBINIT.RE PAIRMB apply degrade req} sideband message 
indicating the functional Lanes on its Transmitter using one of the logical Lane map encodings from Table 4-9 . Encodings 100b and 101b can be used only  when the SPMW bit is set to 1 or the 
UCIe-S x8 bit was set to 1 in the transmitted or received {MBINIT.PA RAM configuration req} 
sideband message. If the remote Link partner indi cated a width degrade in the functional Lanes, 
the UCIe Module must apply the corresponding width degrade to its Receiver. If the remote Link 
partner indicated all Lanes are functional (i.e. a La ne map code of 011b), the UCIe Module sets its 
Transmitter and Receiver to the width corresponding  to the functional Lane encoding determined 
on its Transmitter. The UCIe Module sends the {MBINIT.REPAIRMB apply degrade resp} sideband 
message after setting its Transmitter and Receiver la nes to the relevant width. If the width on the 
Transmitter or Receiver has changed, both Link partners must repeat Step 2 . If the width on the 
Transmitter or Receiver has not changed, proceed to Step 4 . If a “Degrade not possible” encoding 
is sent or received in the {MBINIT.REPAIRMB apply degrade req} sideband message, the UCIe 
Module must exit to TRAINERROR after performing the TRAINERROR handshake.
4. The UCIe Module sends the {MBINIT.REPAIRMB en d req} sideband message and the UCIe Module 
Partner responds with the {MBINIT.REPAIRMB end resp} sideband message. When the UCIe 
Module has sent and received the {MBINIT.REPAIRMB end resp} sideband message, it must exit 
to MBTRAIN.
--- Page 58 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 154
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3.4 MBTRAIN
MBTRAIN state is used to setup operational speed and perform clock to data centering. At higher 
speeds, additional calibrations like Rx clock correction, Tx and Rx deskew may be needed to ensure 
Link performance. MBTRAIN uses sub-states to perf orm all the required calibra tion and training. UCIe 
Modules must enter each sub-state and the exit from each sub-state is coordinated between UCIe 
Module Partners through sideband handshakes. If a pa rticular action within a sub-state is not needed, 
the UCIe Module is permitted to exit the sub-stat e through the relevant sideband handshake without 
performing the described operations in that sub-state.
Devices enter this state once the MBINIT is completed. This state is common for Advanced  and 
Standard Packages .Table 4-9. Standard Package Logical Lane Map
Lane Map Code Functional Lanes
000b None (Degrade not possible)
001b Logical Lanes 0 to 7010b Logical Lanes 8 to 15
011b 0 - 15
100b Logical Lanes 0 to 3101b Logical Lanes 4 to 7
IMPLEMENTATION NOTE
Consider an example in which Die A is co mmunicating with Die B over a Standard 
Package UCIe Link.
During the first iteration of Step 2 of MB INIT.REPAIRMB, let’s say that Tx on Die A 
detects errors on Lane ID 1 and not on any other Lanes, but Tx on Die B detects 
errors on Lane ID 10 and not on any other Lanes. Thus, as per the rules in Step 3, Die 
A sends {MBINIT.REPAIRMB apply degrade req} with a Lane map code of 010b. Similarly, in Step 3, Die B sends {MBINIT.REPAIRMB apply degrade req} with a Lane 
map code of 001b. The Rx on Die B disables Lanes 0 to 7, and the Tx on Die B tri-
states Lanes 8 to 15. The Rx on Die A disabl es Lanes 8 to 15, and the Tx on Die A tri-
states Lanes 0 to 7. Following the rules in Step 3, each die goes back and repeats 
Step 2.
In this second iteration of Step 2, both Di e know that some of the Lanes are disabled, 
and they will ignore the information related to the disabled Lanes in {Tx Init D to C 
results resp} (e.g., Die A will ignore the information related to Lanes 0 to 7 and 
perform only the Transmitter-initiated Data to Clock point test on Lanes 8 to 15).
Let’s say that in the second iteration of Step  2, no errors are reported on the enabled 
Lanes. In Step 3, Die A sends {MBINIT.REPAIRMB apply degrade req} with a Lane 
map code of 010b. Similarly, in Step 3, Die B sends {MBINIT.REPAIRMB apply degrade req} with a Lane map code of 001b. Because the width of the Tx and Rx 
have not changed, both Die proceed to Step 4.
--- Page 59 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 155
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3.4.1 MBTRAIN.VALVREF
Receiver reference voltage (Vref) to sample the incoming Valid is optimized in this state. The data 
rate on the mainband continues to be at the lowest  supported data rate (4 GT/s). The UCIe Module 
Partner must set the forwarded clock phase at the cent er of the data UI on its mainband Transmitters. 
The UCIe Module must sample the pattern on Valid si gnal with the forwarded clock. All data Lanes and 
Track must be held low during Valid Lane reference voltage training. Track Receivers are permitted to 
be disabled. When not performing the actions relevant to this state:
• Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking)
• Clock Receivers are enabled
The sequence for Valid Receiver reference voltage adjustment is as follows:
1. The UCIe Module must send the {MBTRAIN.VALVREF start req} sideband message and wait for a 
response. When {MBTRAIN.VALVREF start req} si deband message is received, the UCIe Module 
Partner responds with {MBTRAIN.VALVREF start resp}.Figure 4-41. Mainband Training

--- Page 60 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 156
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 2. UCIe Module optimizes Vref on its Valid Receiv er by adjusting Receiver reference voltage and 
performing one or more Receiver-initi ated Data-to-Clock point tests (see Section 4.5.1.3 ) (AND/
OR) one or more Receiver-initiated Data-to-Clock eye width sweeps (see Section 4.5.1.4 ).
a. The transmit pattern must be set to send 128 it erations of continuous mode “VALTRAIN” (four 
1s and four 0s) pattern (see Table 4-5 ). This pattern must not be scrambled. The Receiver must 
be set up to perform comparison on the Valid Lane.
b. Detection on a Receiver Lane is considered successful if “VALTRAIN” pattern detection errors 
are less than the set threshold (per Lane comparison threshold in Section 9.5.3.29 ).
c. It should be noted that LFSR RESET has no impact in MBTRAIN.VALVREF.
3. The UCIe Module must send {MBTRAIN.VALVREF end req} sideband message after the Vref 
optimization (One way to perform Vref Optimi zation is to step through Vref and perform Step 2  at 
each setting). When {MBTRAIN.VALVREF end req} is received, the UCIe Module Partner must 
respond with {MBTRAIN.VALVREF end resp}. When  the UCIe Module has sent and received the 
sideband message {MBTRAIN.VALVREF end resp }, it must exit to MBTRAIN.DATAVREF.
4.5.3.4.2 MBTRAIN.DATAVREF
Receiver reference voltage (Vref) to sample the incomi ng data is optimized in this state. The data rate 
on the UCIe Module mainband continues to be at  the lowest supported data rate (4 GT/s). The 
Transmitter sets the forwarded clock phase at the cent er of the data UI. The Track Transmitter is held 
low and the Track Receiver is permitted to be disabled. When not performing the actions relevant to 
this state:
• Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking)
• Clock Receivers are enabled
• Data and Valid Transmitters are held low• Data and Valid Receivers are enabled
The sequence for data Receiver reference voltage adjustment is as follows:
1. The UCIe Module sends the sideband me ssage {MBTRAIN.DATAVREF start req}. When 
{MBTRAIN.DATAVREF start req} sideband message is  received, the UCIe Module Partner responds 
with {MBTRAIN.DATAVREF start resp}.
2. The UCIe Module optimizes data Vref by adjusting data Receiver reference voltage and 
performing one or more Receiver-initi ated Data-to-Clock point tests (see Section 4.5.1.3 ) (AND/
OR) one or more Receiver-initiated Data-to-Clock eye width sweeps (see Section 4.5.1.4 ).
a. The Transmitter must be set up to send 4K UI  of continuous mode LFSR pattern described in 
Section 4.4.1 . The LFSR pattern on Data must be accompanied by correct Valid framing on the 
Valid Lane as described in Section 4.1.2 . The Receiver must be set up to perform per Lane 
comparison.
b. Detection on a Receiver Lane is considered successful if total error count is less than the set 
error threshold (see Section 9.5.3.29 ).
3. The UCIe Module must send {MBTRAIN.DATAVREF end req} sideband message after the Vref 
optimization (One way to perform Vref Optimization  is to step through Vref and perform step 2 at 
each setting). When {MBTRAIN.DATAVREF end req} is received, the UCIe Module Partner must 
respond with {MBTRAIN.DATAVREF end resp}. Once  the UCIe Module has sent and received the 
sideband message {MBTRAIN.DATAVREF end resp }, it must exit to MBTRAIN.SPEEDIDLE.
--- Page 61 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 157
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3.4.3 MBTRAIN.SPEEDIDLE
This is an electrical idle state to allow frequency change. Clock Transmitters are held differential low 
(for differential clocking) or simultaneous low (for  Quadrature clocking). Clock Receivers are enabled. 
Data, Valid, and Track Transmitters are held low.
The following rules apply:
1. The data rate is determined as follows:
— If this state is entered from MBTRAIN.DATAVREF, the UCIe Module transitions to a data rate 
based on the highest common speed between the two devices (see Section 4.5.3.3.1 ).
— Else if this state is entered from L1, the op erating speed in the last ACTIVE state before 
entering L1 must be restored.
— Else if this state is entered from LINKSPEED or PHYRETRAIN (speed degrade), and the current 
speed is not 4 GT/s, the next-lower data rate must be picked.
— Else the UCIe Module must exit to TRAINERROR after performing the TRAINERROR 
handshake.
2. The width of the Link is set to the width previous ly determined at the exit of MBINIT.REPAIRMB or 
MBTRAIN.REPAIR (whichever was the most-recent state relative to entry into SPEEDIDLE).
3. Upon completing the transition to the requ ired data rate, the UCIe Module must send 
{MBTRAIN.SPEEDIDLE done req} sideband message. When {MBTRAIN.SPEEDIDLE done req} 
sideband message is received, UCIe Module Pa rtner responds with {MBTRAIN.SPEEDIDLE done 
resp}. Once the UCIe Module has sent and received the {MBTRAIN.SPEEDIDLE done resp} 
sideband message, it must exit to MBTRAIN.TXSELFCAL.
4.5.3.4.4 MBTRAIN.TXSELFCAL
The UCIe Module calibrates its circuit parameters  independent of the UCIe Module Partner. Data, 
Clock, Valid, and Track Transmitters are tri-stat ed. Data, Clock, Valid, and Track Receivers are 
permitted to be disabled.
1. UCIe Module is permitted to perform implemen tation specific Transmitter-related calibration.
2. Upon completion of calibration, the UCIe Module must send the {MBTRAIN.TXSELFCAL Done req} 
sideband message. When {MBTRAIN.TXSELFCAL Do ne req} sideband message is received, the 
UCIe Module Partner must respond with {MBT RAIN.TXSELFCAL Done resp}. When the UCIe 
Module has sent and received the  {MBTRAIN.TXSELFCAL Done resp} sideband message, it must 
exit to MBTRAIN. RXCLKCAL.
4.5.3.4.5 MBTRAIN.RXCLKCAL
In this state, Data, Valid Transmitters are held low (Data and Valid Receivers are permitted to be 
disabled). When not performing the actions relevant to this state, if Strobe  mode was advertised by 
the UCIe Module partner, the Clock Transmitters are he ld differential low (for differential clocking) or 
simultaneous low (for Quadrature clocking). When not performing the actions relevant to this state, if 
continuous clock mode was advertised by the UCIe Module partner and the {MBTRAIN.RXCLKCAL 
start req} sideband message has been received, th en the Clock Transmitters are providing the free-
running forwarded clock.
1. The UCIe Module, when ready to perform cali bration on its Clock receive path, sends the 
{MBTRAIN.RXCLKCAL start req} sideband messa ge. When the {MBTRAIN.RXCLKCAL start req} 
sideband message is received, the UCIe Module Partner starts sending the forwarded clock and 
Track. Subsequently, the UCIe Module Part ner sends the {MBTRAIN.RXCLKCAL start resp} 
sideband message. The Transmitter clock must be free running and all Data Lanes and Valid must be held low. The UCIe Module is permitted to use the forwarded clock to perform any clock path-
--- Page 62 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 158
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 related and Clock-to-Track-related calibration. The UCIe Module Partner must not adjust any 
circuit or PI phase parameters on its Transmitters within this state.
2. When the required calibration (if any) is perf ormed, the UCIe Module sends {MBTRAIN.RXCLKCAL 
done req} sideband message. When {MBTRAIN.RXCLKCAL done req} is received, the UCIe 
Module Partner stops sending forwarded clock and responds by sending {MBTRAIN.RXCLKCAL 
done resp} sideband message. When a UCIe Module has sent and received {MBTRAIN.RXCLKCAL 
done resp} sideband message, it must  exit to MBTRAIN.VALTRAINCENTER.
4.5.3.4.6 MBTRAIN.VALTRAINCENTER
To ensure the valid signal is functional, valid to clock training is performed before the data Lane 
training. The Receiver samples the pattern on Valid  with the forwarded clock. Receiver reference 
voltage is set to the optimized value achieved through Vref training (see Section 4.5.3.4.1  and 
Section 4.5.3.4.2 ). All data and Track Transmitters are held low during valid to clock training. When 
not performing the actions relevant to this state, if Strobe mode was advertised by the UCIe Module 
partner, then the Clock Transmitters are held different ial low (for differential clocking) or simultaneous 
low (for Quadrature clocking). When not performing the actions relevant to this state, if continuous 
clock mode was advertised by the UCIe Module part ner, then the Clock Transmitters are providing the 
free-running forwarded clock.
Following is the MBTRAIN.VALTRAINCENTER sequence:
1. The UCIe Module sends a sideband message {MBTRAIN.VALTRAINCENTER start req}. The UCIe 
Module Partner responds with {MBTRAIN.VALTRAINCENTER start resp}.
2. The UCIe Module must perform one or more Tran smitter-initiated Data-to-Clock eye width sweeps 
(see Section 4.5.1.2 ) (AND/OR) one or more Transmitter-initiated Data-to-Clock point tests (see 
Section 4.5.1.1 ) to determine the correct Valid to clock centering.
a. The transmit pattern must be set to send 128 it erations of continuous mode “VALTRAIN” (four 
1s and four 0s) pattern (see Table 4-5 ). This pattern must not be scrambled. The Receiver must 
be set up to perform comparison on the Valid Lane.
b. Detection on a Receiver Lane is considered successful if “VALTRAIN” pattern detection errors 
are less than set threshold (per Lane comparison threshold in Section 9.5.3.29 ).
c. It should be noted that LFSR RESET has no impact in MBTRAIN.VALVREF.
3. The UCIe Module can use the received results log to assess valid functionality and margins. 
Following this, step 4 must be performed.
4. The UCIe Module must send {MBTRAIN.VAL TRAINCENTER done req} sideband message. 
When {MBTRAIN.VALTRAINCENTER done req} is re ceived the UCIe Module Partner responds 
with {MBTRAIN.VALTRAINCENTER done resp}. Once  the UCIe Module has sent and received 
{MBTRAIN.VALTRAINCENTER done resp} sideband  message, the UCIe Module must exit to 
MBTRAIN.VALTRAINVREF.
4.5.3.4.7 MBTRAIN.VALTRAINVREF
UCIe Module is permitted to optionally optimize th e reference voltage (Vref) to sample the incoming 
Valid at the operating data rate. All Data and Track Transmitters are held low during Valid-to-Clock training. When not performing the actions relevant to this state, if Strobe mode was advertised by the 
UCIe Module partner, then the Clock Transmitters are held differential low (for differential clocking) or 
simultaneous low (for Quadrature clocking). When not performing the actions relevant to this state, if 
continuous clock mode was advertised by the UCIe Module partner, then the Clock Transmitters are 
providing the free-running forwarded clock.
The sequence for Valid Receiver reference voltage adjustment is as follows:
--- Page 63 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 159
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 1. The UCIe Module must send the sideband me ssage {MBTRAIN.VALTRAINVREF start req}. When 
{MBTRAIN.VALTRAINVREF start req} sideband me ssage is received, the UCIe Module Partner 
responds with {MBTRAIN.VALTRAINVREF start resp}.
2. UCIe Module optionally optimizes Vref by ad justing Receiver reference voltage on its Valid 
Receiver and performing one or more Receiver-initiated Data-to-Clock eye width sweeps (see 
Section 4.5.1.4 ) (AND/OR) one or more Receiver-initiated Data-to-Clock point tests (see 
Section 4.5.1.3 ). Step 2 is optional and implementation-specific.
a. If Valid centering is performed, the transmit pattern must be set to send 128 iterations of 
continuous mode “VALTRAIN” (four 1s and four 0s) pattern (see Table 4-5 ). This pattern must 
not be scrambled. The Receiver must be set up to perform comparison on the Valid Lane.
b. Detection on a Receiver Lane is considered successful if “VALTRAIN” pattern detection errors 
are less than set threshold (per Lane comparison threshold in Section 9.5.3.29 ).
c. It should be noted that LFSR RESET has no impact in MBTRAIN.VALVREF.
3. The UCIe Module must send {MBTRAIN.VALTRAINV REF end req} sideband message after the Vref 
optimization is complete. When {MBTRAIN.VALTRAI NVREF end req} is received, the UCIe Module 
Partner must respond with {MBTRAIN.VALTRAINVRE F end resp}. Once the UCIe Module has sent 
and received the sideband message {MBTRAIN.V ALTRAINVREF end resp}, it must exit to 
MBTRAIN.DATATRAINCENTER1.
4.5.3.4.8 MBTRAIN.DATATRAINCENTER1
In this state, the UCIe Module performs Data-t o-Clock training (including valid). LFSR patterns 
described in Section 4.4.1  must be used in this state. The Track Transmitter is held Low. When not 
performing the actions relevant to this state:
• Clock Receivers are enabled
• Data and Valid Transmitters are held low• Data and Valid Receivers are enabled
• If Strobe mode was advertised by the UCIe Module  partner, then the Clock Transmitters are held 
differential low (for differential clocking) or simultaneous low (for Quadrature clocking)
• If continuous clock mode was advertised by the UCIe Module partner, then the Clock Transmitters 
are providing the free-running forwarded clock
Following is the MBTRAIN.DATATRAINCENTER1 sequence:
1. The UCIe Module sends the {MBTRAIN.DATATRA INCENTER1 start req} sideband message. When 
{MBTRAIN.DATATRAINCENTER1 start req} sideband message is received, the UCIe Module Partner responds with {MBTRAIN.DATATRAINCENTER1 start resp}.
2. The UCIe Module must perform one or more Tran smitter-initiated Data-to-Clock eye width sweeps 
(see Section 4.5.1.2 ) (AND/OR) one or more Transmitter-initiated Data-to-Clock point tests (see 
Section 4.5.1.1 ) to determine the correct data to clock centering and adjust Transmitter per-bit 
deskew (if needed).
a. The Transmitter must be set up to send 4K UI  of continuous mode LFSR pattern described in 
Section 4.4.1 . The LFSR pattern on data must be acco mpanied by correct valid framing on the 
Valid Lane as described in Section 4.1.2 . The Receiver must be set up to perform per Lane 
comparison.
b. Detection on a Receiver Lane is considered successful if total error count is less than the set 
error threshold (see Section 9.5.3.29 ).
--- Page 64 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 160
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 3. If the test is a success, the UCIe Module mu st set the clock phase to sample the data eye 
at the optimal point to maximize eye ma rgins. The UCIe Module must send 
{MBTRAIN.DATATRAINCENTER1 end req} sideband message. When 
{MBTRAIN.DATATRAINCENTER1 end req} sideband message is received, the UCIe Module Partner responds with {MBTRAIN.DATATRAINCENTER1 end resp}. Once the UCIe Module has sent and 
received the {MBTRAIN.DATATRAINCENTER1 end resp} sideband message, it must exit to 
MBTRAIN.DATATRAINVREF.
4.5.3.4.9 MBTRAIN.DATATRAINVREF
UCIe Module is permitted to optionally optimize th e reference voltage (Vref) on its data Receivers to 
optimize sampling of the incoming Data at the operat ing data rate. The Track Transmitter is held Low. 
When not performing the actions relevant to this state:
• Clock Receivers are enabled• Data and Valid Transmitters are held low
• Data and Valid Receivers are enabled
• If Strobe mode was advertised by the UCIe Module  partner, then the Clock Transmitters are held 
differential low (for differential clocking) or simultaneous low (for Quadrature clocking)
• If continuous clock mode was advertised by the UCIe Module partner, then the Clock Transmitters 
are providing the free-running forwarded clock
The sequence for data Receiver reference voltage adjustment is as follows:
1. The UCIe Module must send the sideband message {MBTRAIN.DATATRAINVREF start req}. When 
{MBTRAIN.DATATRAINVREF start req} sideband me ssage is received, the UCIe Module Partner 
responds with {MBTRAIN.DATATRAINVREF start resp}.
2. UCIe Module optionally optimizes Vref by adju sting Receiver reference voltage and performing 
one or more Receiver-initiated Data-to-Clock eye width sweeps (see Section 4.5.1.4 ) (AND/OR) 
one or more Receiver-initiated Data-to-Clock point tests (see Section 4.5.1.3 ). Step 2 is optional 
and implementation specific. If Data  Vref optimizati on is performed:
a. The Transmitter must be set up to send 4K UI  of continuous mode LFSR pattern described in 
Section 4.4.1 . The LFSR pattern on data must be acco mpanied by correct valid framing on the 
Valid Lane as described in Section 4.1.2 . The Receiver must be set up to perform per Lane 
comparison.
b. Detection on a Receiver Lane is considered successful if total error count is less than the set 
error threshold (see Section 9.5.3.29 ).
3. The UCIe Module must send {MBTRAIN.DATATRAINVREF end req} sideband message after the 
Vref optimization is complete. When {MBTRAIN.DATATRAINVREF end req} is received, the UCIe 
Module Partner responds with {MBTRAIN.DATATRA INVREF end resp}. Once the UCIe Module has 
sent and received the sideband message {MBTRAIN.DATATRAINVREF end resp}, it must exit to MBTRAIN.RXDESKEW.
Note: It is possible that the eye opening in this step is insufficient (test fails) and a per-bit 
deskew may be needed on the Receiver. Thus, the UCIe Module must exit to 
MBTRAIN.RXDESKEW.
4.5.3.4.10 MBTRAIN.RXDESKEW
The UCIe Module is permitted to optionally perf orm per Lane deskew on its Receivers to improve 
timing margin in this state. The Track Transmitte r is held Low. When not performing the actions 
relevant to this state:
• Clock Receivers are enabled
--- Page 65 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 161
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 • Data and Valid Transmitters are held low
• Data and Valid Receivers are enabled
• If Strobe mode was advertised by the UCIe Module  partner, then the Clock Transmitters are held 
differential low (for differential clocking) or simultaneous low (for Quadrature clocking)
• If continuous clock mode was advertised by the UCIe Module partner, then the Clock Transmitters 
are providing the free-running forwarded clock
Following is the MBTRAIN.RXDESKEW sequence:
1. The UCIe Module must send the sideband message {MBTRAIN.RXDES KEW start req}. When 
{MBTRAIN.RXDESKEW start req} sideband messa ge is received, the UCIe Module Partner 
responds with {MBTRAIN.RXDESKEW start resp}.
2. UCIe Module optionally performs per Lane deskew on its Receivers by one or more Receiver-
initiated Data-to-Clock eye width sweeps (see Section 4.5.1.4 ) (AND/OR) one or more Receiver-
initiated Data-to-Clock point tests (see Section 4.5.1.3 ). Step 2 is optional and implementation 
specific. If per Lane deskew is performed:
a. The Transmitter must be set up to send 4K UI  of continuous mode LFSR pattern described in 
Section 4.4.1 . The LFSR pattern on data must be acco mpanied by correct valid framing on the 
Valid Lane as described in Section 4.1.2 . The Receiver must be set up to perform per Lane 
comparison.
b. Detection on a Receiver Lane is considered successful if total error count is less than the set 
threshold (see Section 9.5.3.29 ).
3. The UCIe Module must send {MBTRAIN.RXDESKE W end req} sideband message after the deskew 
is performed or skipped. When {MBTRAIN.RXDES KEW end req} is received, the UCIe Module 
Partner must respond with {MBTRAIN.RXDESKEW end resp}. Once UCIe Module has sent and 
received the sideband message {MBTRAIN.R XDESKEW end resp}, it must exit to 
MBTRAIN.DATATRAINCENTER2.
4.5.3.4.11 MBTRAIN.DATATRAINCENTER2
This state is needed for the UCIe Module to recenter clock to aggregate data in case the UCIe Module 
Partner’s Receiver performed a pe r Lane deskew. The Track Transmitter is held Low. When not 
performing the actions relevant to this state:
• Clock Receivers are enabled
• Data and Valid Transmitters are held low
• Data and Valid Receivers are enabled• If Strobe mode was advertised by the UCIe Module  partner, then the Clock Transmitters are held 
differential low (for differential clocking) or simultaneous low (for Quadrature clocking)
• If continuous clock mode was advertised by the UCIe Module partner, then the Clock Transmitters 
are providing the free-running forwarded clock
Following is the MBTRAIN.DATATRAINCENTER2 sequence:
1. The UCIe Module sends the sideband message  {MBTRAIN.DATATRAINCENTER2 start req}. When 
{MBTRAIN.DATATRAINCENTER2 start req} sideband message is received, the UCIe Module 
Partner responds with {MBTRAIN.DATATRAINCENTER2 start resp}.
2. The UCIe Module must perform one or more Tran smitter-initiated Data-to-Clock eye width sweeps 
(see Section 4.5.1.2 ) (AND/OR) one or more Transmitter-initiated Data-to-Clock point tests (see 
Section 4.5.1.1 ) to determine the correct data-to-eye centering.
--- Page 66 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 162
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 a. The Transmitter must be set up to send 4K UI  of continuous mode LFSR pattern described in 
Section 4.4.1 . The LFSR pattern on data must be acco mpanied by correct valid framing on the 
Valid Lane as described in Section 4.1.2 . The Receiver must be set up to perform per Lane 
comparison.
b. Detection on a Receiver Lane is considered successful if total error count is less than the set 
error threshold (see Section 9.5.3.29 ).
3. The UCIe Module uses the received training results to calculate the final eye center and set the 
clock phase to sample the data eye at the opti mal point to maximize eye margins. The UCIe 
Module must send the {MBTRAIN.DATATRAIN CENTER2 end req} sideband message. When 
{MBTRAIN.DATATRAINCENTER2 end req} sideband message is received, the UCIe Module Partner responds with {MBTRAIN.DATATRAINCENTER2 en d resp}. Once UCIe Module has sent and 
received {MBTRAIN.DATATRAINCENTER2 end re sp} sideband message, it must exit to 
MBTRAIN.LINKSPEED.
4.5.3.4.12 MBTRAIN.LINKSPEED
In this state, the UCIe Module checks Link stability at the operating date rate. The Track Transmitter is 
held Low. When not performing the actions relevant to this state:
• Clock Receivers are enabled
• Data and Valid Transmitters are held low• Data and Valid Receivers are enabled
• If Strobe mode was advertised by the UCIe Module  partner, then the Clock Transmitters are held 
differential low (for differential clocking) or simultaneous low (for Quadrature clocking)
• If continuous clock mode was advertised by the UCIe Module partner, then the Clock Transmitters 
are providing the free-running forwarded clock
The following steps must be executed sequentially, when applicable:
1. The UCIe Module sends the sideband messa ge {MBTRAIN.LINKSPEED start req}. When 
{MBTRAIN.LINKSPEED start req} sideband messa ge is received, the UCIe Module Partner 
responds with {MBTRAIN.LINKSPEED start resp}.
2. The UCIe Module must perform a Transmitter-initiated Data-to-Clock point test (see 
Section 4.5.1.1 ) with the final clock sampling phase calculated in the previous 
MBTRAIN.DATACENTER2 state. LFSR pattern described in Section 4.4.1  must be used in this 
state.
a. The Transmitter must be set up to send 4K UI  of continuous mode LFSR pattern described in 
Section 4.4.1 . The LFSR pattern on data must be acco mpanied by correct valid framing on the 
Valid Lane as described in Section 4.1.2 . The Receiver must be set up to perform per Lane 
comparison.
b. Detection on a Receiver Lane is considered successful if total error count is less than the set 
threshold (see Section 9.5.3.29 ).
--- Page 67 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 163
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 3. For single-Module instantiations, if errors are en countered, the UCIe Module sets its Transmitters 
to an electrical idle state and sends {MBTRAIN .LINKSPEED error req} sideband message. If an 
{MBTRAIN.LINKSPEED error req} sideband message  is received, the UCIe Module Partner must 
complete Step 1  and Step 2 , evaluate the results and if not initiating an {MBTRAIN.LINKSPEED 
exit to phy retrain req} sideband message, the UCIe  Module Partner enters electrical idle on its 
Receiver and sends the {MBTRAIN.LINKSPEED  error resp} sideband message. If an 
{MBTRAIN.LINKSPEED exit to phy retrain req} sideband message is received, the UCIe Module 
must exit to PHYRETRAIN and send an {MBTRAIN .LINKSPEED exit to PHY retrain resp} sideband 
message; any outstanding messages are abandoned.  Otherwise, after the {MBTRAIN.LINKSPEED 
error resp} sideband message is received, the PH Y_IN_RETRAIN flag is cleared and the following 
rules apply:
a. Based on the number of Lanes encountering e rrors, the UCIe Module checks if the failing 
Lanes can be repaired (for Advanced package)  or Width degraded (for standard package). 
If Lanes can be can be repaired (for Advanced package) or Width degraded (for standard package), the UCIe Module must send {MBTRAIN.L INKSPEED exit to repair req} to the UCIe 
Module Partner. The UCIe Module Partner, if not initiating a speed degrade, enters 
MBTRAIN.REPAIR and sends the sideband message {MBTRAIN.LINKSPEED exit to repair resp}. 
If {MBTRAIN.LINKSPEED exit to repair resp} is received in response to a 
{MBTRAIN.LINKSPEED exit to repair req}, the UC Ie Module must exit to MBTRAIN.REPAIR. If 
a UCIe Module is initiating a speed degrade, it must not respond to {MBTRAIN.LINKSPEED exit to repair req}.
b. If the Lanes cannot be repaired (for Advanced package) or width degraded (for Standard 
package), the speed must be degraded. The UCIe  Module sends {MBTRAIN.LINKSPEED exit to 
speed degrade req} sideband message and waits fo r a response from the remote Link partner. 
The UCIe Module Partner must respond with {MBTRAIN.LINKSPEED exit to speed degrade resp}. Following this handshake, the UCIe Mo dule must exit to MBTRAIN.SPEEDIDLE to set 
data rate to next lower speed.
c. If the UCIe Module receives an {MBTRAIN .LINKSPEED exit to speed degrade req} any 
outstanding {MBTRAIN.LINKSPEED exit to repa ir req} must be abandoned and the UCIe 
Module must respond to {MBTRAIN.LINKSPEED exit to speed degrade req}.
d. Any outstanding {MBTRAIN.LINKSPEED done req}  must be abandoned if a UCIe Module has 
received a {MBTRAIN.LINKSPEED error req}.
4. For single- or multi-module instantiations, if no errors are encountered, the UCIe Module must set 
the clock phase on its Transmitter to sample the data eye at the optimal point to maximize eye margins. If PHY_IN_RETRAIN is not set fo r single-module instantiations, proceed to Step 6 . If 
PHY_IN_RETRAIN is not set, for multi-module in stantiations, the UCIe Module must send the 
{MBTRAIN.LINKSPEED done req} (if not waiting for Link match criteria as a Retimer) to the remote UCIe Module Partner and wait for mu lti-module PHY Logic (MMPL) resolution in Step 5c . If 
the PHY_IN_RETRAIN variable is set, the following actions must be taken:
a. If a change is detected in Runtime Link Testing Control register relative to the values at 
previous PHYRETRAIN entry, the UCIe Module must send {MBTRAIN.LINKSPEED exit to phy 
retrain req} and wait for a response. Upon re ceiving this message, the UCIe Module Partner 
must exit to PHY retrain and send {MBTRAIN.LIN KSPEED exit to PHY retrain resp}. Once this 
sideband message is received, the UCIe Module must exit to PHY retrain.
b. Else if no change is detected in the Runtime Link Testing Control register relative to the values 
at previous PHYRETRAIN entry, Busy bit in R untime Link Testing Status and PHY_IN_RETRAIN 
variable must be cleared and the UCIe Module must proceed to Step 6 .
--- Page 68 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 164
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 5. For multi-module instantiations, if errors are en countered, the UCIe Module sets its Transmitters 
to an electrical idle state and sends {MBTRAIN .LINKSPEED error req} sideband message. If an 
{MBTRAIN.LINKSPEED error req} sideband message is received, the UCIe Module Partner must 
complete Step 1  and Step 2 , evaluate the results and if not initiating an {MBTRAIN.LINKSPEED 
exit to phy retrain req} sideband message, the UCIe  Module Partner enters electrical idle on its 
Receiver, and sends the {MBTRAIN.LINKSPEED  error resp} sideband message. If an 
{MBTRAIN.LINKSPEED exit to phy retrain req} sideband message is received, the UCIe Module 
must exit to PHYRETRAIN and send an {MBTRAIN .LINKSPEED exit to PHY retrain resp} sideband 
message; any outstanding messages are abandoned.  Otherwise, after the {MBTRAIN.LINKSPEED 
error resp} sideband message is received, the PH Y_IN_RETRAIN flag is cleared and the following 
rules apply:
a. Based on the number of Lanes encountering errors , the UCIe Module checks whether the failing 
Lanes can be repaired (for Advanced Package) or Width degraded (for Standard Package). If 
Lanes can be can be repaired (for Advanced Package) or Width degraded (for Standard 
Package), the UCIe Module must send {MBTRAIN.L INKSPEED exit to repair req} to the UCIe 
Module Partner.
b. If the Lanes cannot be repaired (for Advanced  Package) or width degraded (for Standard 
Package), the speed must be degraded. The UCIe  Module sends {MBTRAIN.LINKSPEED exit to 
speed degrade req}.
c. The UCIe Module informs MMPL of local and re mote error requests, done requests, or speed 
degrade requests, and waits for resolution. It also informs MMPL of any prior width degrade 
(for example in MBINIT.REPAIRMB), and MMPL treats this as the corresponding module 
requesting width degrade from the full operational width.
d. Based on the resolution flow chart in Section 4.7 , MMPL directs each Module to send either the 
{MBTRAIN.LINKSPEED exit to repair resp } (indicating next state is REPAIR), 
{MBTRAIN.LINKSPEED exit to speed degrade resp } (indicating next state is SPEEDIDLE with 
target speed to next-lower speed), {MBTRAIN.LINKSPEED multi-module disable module resp} 
(indicating next state is TRAINERROR and even tually RESET), or {MBTRAIN.LINKSPEED done 
resp} (indicating next state is LINKINIT). This is  done regardless of the module’s original error 
request or done request, and in dicates the result of the resolution and next state to each 
module. The UCIe Module transitions to next state once it has sent and received the sideband 
response message that matches the expected re solution. Any mismatch on received message 
vs. expected resolution must take all modules to TRAINERROR. For Retimer dies, the resolution 
must take into account any Link match requirements, and while resolving the target 
configuration with remote Retimer partner, each  UCIe Module from the Retimer die must send 
{MBTRAIN.LINKSPEED done resp} with stall encoding every 4 ms. The UCIe Retimer must 
ensure that this stall is not perpetual, and an implementation-specific timeout must be included 
in the Retimer. If {MBTRAIN.LINKSPEED done re sp} with stall encoding is received, it must 
reset timers for state transition as well as any outstanding handshakes for multi-module 
resolution.
--- Page 69 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 165
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 6. If the UCIe die is not a Retimer, proceed to Step 7 . If the UCIe die is a Retimer, the following rules 
apply to achieve Link match (if required):
a. Retimer must not send {MBTRAIN.LINKSPEED done req} unless the target Link speed and 
width of the remote Retimer partner resolves to current Link and width. Proceed to Step 7  if 
Link match is achieved or if it is not required.
b. While resolving the target Link speed and width with the remote Retimer partner, if a Retimer 
has received an {MBTRAIN.LINKSPEED done re q}, it must send {MBTRAIN.LINKSPEED done 
resp} with stall encoding every 4 ms. UCIe Retimer must ensure that this stall is not perpetual, 
and an implementation specific timeout must be included in the Retimer.
c. If the local UCIe Link speed or width is greater than the remote Retimer UCIe Link, then it must 
treat this as an error condition, and perform Step 3  or Step 5  with repair or speed degrade 
(whichever is applicable).
7. The UCIe Module must send {MBTRAIN.LIN KSPEED done req} sideband message. When 
{MBTRAIN.LINKSPEED done req} is receiv ed, the UCIe Module must respond with 
{MBTRAIN.LINKSPEED done resp} and when a UCIe Module has sent and received the 
{MBTRAIN.LINKSPEED done resp} sideband messa ge, both Transmitters and Receivers are now 
enabled and idle and both devices exit to LINKINIT.
4.5.3.4.13 MBTRAIN.REPAIR
This state can be entered from PHYRETRAIN or fr om MBINIT.LINKSPEED. For Advanced package, this 
state will be used to apply repair and for Standard  package, this state will be used for Link width 
degrade. Track, Data, and Valid Tran smitters are held low. Clock Transmitters are held differential low 
(for differential clocking) or simultaneous low (for Quadrature clocking).
For Advanced Package , if the number of repair resources currently available is greater than the 
number of Lanes encountering errors, repair must be applied:
1. The UCIe Module sends the sideband message {MBTRAIN.REPAIR init req} for its Transmitter and 
the UCIe Module Partner responds with {MBTRAIN.REPAIR init resp}.
2. If Lane repair is possible, the UCIe Module appl ies repair on its Transmitter Lanes as described in 
Section 4.3.1  and sends {MBTRAIN.REPAIR Apply repair req} sideband message. The UCIe 
Module Partner applies repair as described in Section 4.3.1  and responds with {MBTRAIN.REPAIR 
Apply repair resp} sideband message once the required repair is applied.
3. The UCIe Module must send {MBTRAIN.REPAI R end req} sideband message and waits for a 
response. The UCIe Module Partner must then respond with {MBTRAIN.REPAIR end resp}. When 
a UCIe Module has sent and received {MBT RAIN.REPAIR end resp}, it must exit to 
MBTRAIN.TXSELFCAL.
For a x16 Standard package , if the Lanes encountering errors are all contained within the set of 
Lane 0 through Lane 7 or Lane 8 through Lane 15, th e width must be degraded to a x8 Link using the 
set of Lanes without errors (Lane 0 ... Lane  7 OR Lane 8 ... Lane 15). Likewise, for a x8 Standard 
package , if the Lanes encountering errors are all contai ned within the set of Lane 0 through Lane 3 
or Lane 4 through Lane 7, the width must be degraded to a x4 Link using the set of Lanes without errors (Lane 0 through Lane 3 or Lane 4 through Lane 7).
1. The UCIe Module sends the sideband message {MBTRAIN.REPAIR init req} and the Receiver 
responds with {MBTRAIN.REPAIR init resp}.
--- Page 70 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 166
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 2. The UCIe Module must send the {MBTRAIN.REPAIR apply degrade req} sideband message, 
indicating the functional Lanes on its Transmitter using one of the logical Lane map encodings 
from Table 4-9 . Encodings 100b and 101b can be used only  when the SPMW bit is set to 1 or the 
UCIe-S x8 bit was set to 1 in the transmitted or received {MBINIT.PA RAM configuration req} 
sideband message. If the remote Link partner indi cated a width degrade in the functional Lanes, 
the UCIe Module must apply the corresponding width degrade to its Receiver. If the remote Link 
partner indicated all Lanes are functional, the UCIe Module sets its Transmitter and Receiver to 
the logical lane map corresponding to the functional  Lane encoding determined on its Transmitter. 
The UCIe Module sends the {MBTRAIN.REPAIR apply degrade resp} sideband message after 
setting its Transmitter and Receiver lanes to the relevant logical lane map and proceeds to Step 3  
if a degrade is possible or if all Lanes are functi onal. If a “Degrade not possible” encoding is sent 
or received in the {MBTRAIN.REPAIR apply degrade req} sideband message, the UCIe Module must exit to TRAINERROR after performing the TRAINERROR handshake.
3. The UCIe Module must send the {MBTRAIN.REPAIR end req} sideband message and wait for a 
response. The UCIe Module Partner must then  respond with the {MBTRAIN.REPAIR end resp} 
sideband message. When UCIe Module has sent  and received the {MBTRAIN.REPAIR end resp} 
sideband message, the UCIe Module must exit to MBTRAIN.TXSELFCAL.
4.5.3.5 LINKINIT
This state is used to allow die to die adapter to complete initial Link management before entering 
Active state on RDI. See Section 10.1.6  for more details on RDI bring up flow. Track, Data, and Valid 
Transmitters are held low. If Strobe mode was adve rtised by the UCIe Module partner, then the Clock 
Transmitters are held differential low (for differenti al clocking) or simultaneous low (for Quadrature 
clocking). If continuous clock mode was advertis ed by the UCIe Module partner, then the Clock 
Transmitters are providing the free-running fo rwarded clock. Clock Receivers are enabled.
Once RDI is in Active state, the PHY will clear its co py of “Start UCIe Link tr aining” bit from UCIe Link 
control register.
The LFSR must be RESET upon entering this state.
This state is common for Advanced  Package  and Standard Package  configurations.
4.5.3.6 ACTIVE
Physical layer initialization is complete, RDI is in Active state and packets from upper layers can be 
exchanged between the two dies.
All data in this state is scrambled using the scrambler LFSR described in Section 4.4.1 . Clock gating 
rules as described in Section 5.11  apply.
This state is common for Advanced  Package  and Standard Package  configurations.
4.5.3.7 PHYRETRAIN
A die can enter PHY retrain for a number of reasons. Track, Data, and Valid Transmitters are held low. 
Clock Transmitters are held differential low (for differential clocking) or simultaneous low (for 
Quadrature clocking). The trigger for PHY to ente r PHY retrain is one of the following scenarios:
• Adapter directed PHY retrain: Adapter can dire ct the PHY to retrain for any reason it deems 
necessary (see Section 10.3.3.4  Retrain State rules for more details and examples of Adapter-
initiated Retrain requests).
• PHY initiated PHY retrain: Local PHY must init iate retrain on detecting a Valid framing error.
--- Page 71 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 167
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 • Remote die requested PHY retrain: Local PHY must  enter PHY retrain on receiving a request from 
the remote die.
• If a change is detected in Runtime Link Test ing Control register during MBTRAIN.LINKSPEED.
A variable PHY_IN_RETRAIN must be set when  entering PHYRETRAIN. For a multi-module 
configuration, the Retrain encoding (and hence the Retrain exit resolution) must be the same for all 
the modules which are part of the same multi-module Link. This is required because in a multi-
module Link all modules must operate at the same  speed and width (however, for Advanced package, 
it is possible for a module not needing repair to go  through the Repair state and send the “No Repair” 
encoding in the corresponding {*apply repair*} messages).
Table 4-10. Runtime Link Test Stat us Register based Retrain encoding
Link Test Status Register
Retrain Encoding Resolution
Busy bit value Repair Required
0b N/A TXSELFCAL
1b Repair neededREPAIR (If repair resources are available)
SPEEDIDLE (if unrepairable)
1b No Repair TXSELFCAL
Table 4-11. Retrain encoding
Retrain Encoding State Retain Condition
001b TXSELFCALNo Lane errors
(Valid framing errors detected by PHY)
010b SPEEDIDLE Lane errors & faulty Lanes cannot be repaired
100b REPAIR Lane errors & faulty Lanes are repairable
Table 4-12. Retrain exit state resolution
Retrain reg ConditionRetrain Request 
EncodingResolved State 
EncodingExit
Die 0 Die 1 Die 0 Die 1 Die 0 Die 1 Both Dies
No Lane Errors No Lane Errors 001b 001b 001b 001b MBTRAIN.TXSELFCAL
No Lane Errors Repair 001b 100b 100b 100b MBTRAIN.REPAIR
No Lane Errors Speed Degrade 0 01b 010b 010b 010b MBTRAIN.SPEEDIDLE
Repair No Lane Errors 100b 001b 100b 100b MBTRAIN.REPAIR
Repair Repair 100b 100b 100b 100b MBTRAIN.REPAIR
Repair Speed Degrade 100b 010b 010b 010b MBTRAIN.SPEEDIDLESpeed Degrade No Lane Errors 01 0b 001b 010b 010b MBTRAIN.SPEEDIDLE
Speed Degrade Repair 010b 100b 010b 010b MBTRAIN.SPEEDIDLE
Speed Degrade Speed Degrade 010 b 010b 010b 010b MBTRAIN.SPEEDIDLE
--- Page 72 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 168
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3.7.1 Adapter initiated PHY retrain
Following is the sequence of steps for an Adapter initiated PHY retrain:
1. UCIe Module receives retrain request from the local Adapter (RDI state req moved to Retrain). 
Following this, the UCIe Module must complete the stall Req/Ack ( pl_stallreq ; lp_stallack ) 
hand shake on RDI as described in Chapter 10.0 .
2. After completion of stall Req/Ack handshake an d transmitting any pending data over mainband, 
UCIe Module must send sideband message {LinkM gmt.RDI.Req.Retrain} to UCIe Module Partner.
3. The UCIe Module Partner on receiving the side band message {LinkMgmt.RDI.Req.Retrain} must 
transition its RDI state to Retrain after completion of stall Req/Ack ( pl_stallreq ; 
lp_stallack ) handshake on its RDI and there is no mainband data pending in the Receiver 
pipeline. After completion of stall Req/Ack handshake and transmitting any pending data over 
mainband, the UCIe Module Partner resp onds with {LinkMgmt.RDI.Rsp.Retrain}.
4. Once {LinkMgmt.RDI.Rsp.Retrain} is received and there is no mainband data pending in the 
receiver pipeline, the UCIe Module must transition its RDI to Retrain.
5. UCIe Module must send {PHYRETRAIN.retrain st art req} with retrain encoding reflecting the 
contents of Runtime Link Test Control register except the Start bit (if the Busy bit in Runtime Link 
Test Status Register is set). Following this, the UCIe Module Partner compares the received retrain 
encoding with the local retrain encoding. If received retrain encoding is the same as the local retrain encoding, the UCIe Module Partner must re spond with {PHYRETRAIN.retrain start resp}. If 
the retrain encodings do not match, the UCIe Mo dule Partner must resolve according to Retrain 
encodings and resolutions shown in Table 4-10 , Table 4-11 , and Table 4-12  and then send 
{PHYRETRAIN.retrain start resp} with  the resolved retrain encoding.
6. Once UCIe Module sends and receives the sideba nd message {PHYRETRAIN.retrain start resp}, it 
must exit to corresponding training state accord ing to the resolved retrain register encoding.
4.5.3.7.2 PHY initiated PHY retrain
Following is the sequence of steps for PHY initiated PHY retrain:
1. On detecting a valid framing error, the UCIe Module must assert 
pl_error  when transmitting 
that flit (or flit chunk) on RDI. Following this the UCIe Module (PHY) must complete the stall Req/
Ack (pl_stallreq ; lp_stallack ) handshake on RDI.
2. The UCIe Module must send sideband message {LinkMgmt.RDI.Req.Retrain}.
3. The UCIe Module Partner on receiving the side band message {LinkMgmt.RDI.Req.Retrain} must 
transition its RDI to retrain after completion of stall Req/Ack ( pl_stallreq ; lp_stallack ) 
handshake on its RDI. Following that the UCIe Module Partner responds with 
{LinkMgmt.RDI.Rsp.Retrain}.
4. Once {LinkMgmt.RDI.Rsp.Retrain} is received, the UCIe Module must transition its RDI to Retrain.
5. UCIe Module must send {PHYRETRAIN.retrain st art req} with retrain encoding reflecting the 
contents of Runtime Link Test Control register except the Start bit (if the Busy bit in Runtime Link Test Status Register is set). Following this, the UCIe Module Partner compares the received retrain 
encoding with the local retrain encoding. If received retrain encoding is the same as the local 
retrain encoding, the UCIe Module Partner must re spond with {PHYRETRAIN.retrain start resp}. If 
the retrain encodings do not match, the UCIe Mo dule Partner must resolve according to Retrain 
encodings and resolutions shown in Table 4-10 , Table 4-11 , and Table 4-12  and then send 
{PHYRETRAIN.retrain start resp} with  the resolved retrain encoding.
6. Once a UCIe Module has sent and received the sideband message {PHYRETRAIN.retrain start 
resp}, it must exit to corresponding training state according to the resolved retrain encoding.
--- Page 73 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 169
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.5.3.7.3 Remote Die requested PHY retrain
1. On receiving {LinkMgmt.RDI.Req.Retrain}, the UCIe  Module must transition local RDI to retrain 
after completion of stall Req/Ack ( pl_stallreq ; lp_stallack ) handshake on its RDI. 
Following that the UCIe Module respon ds with {LinkMgmt.RDI.Rsp.Retrain}.
2. Once {LinkMgmt.RDI.Rsp.Retrain} is received, the UCIe Module Partner must transition its RDI to 
retrain.
3. UCIe Module must send {PHYRETRAIN.retrain st art req} with retrain encoding reflecting the 
contents of Runtime Link Test Control register except the Start bit (if the Busy bit in Runtime Link Test Status Register is set). Following this, the UCIe Module Partner compares the received retrain 
encoding with the local retrain encoding. If received retrain encoding is the same as the local 
retrain encoding, the UCIe Module Partner responds  with {PHYRETRAIN.retrain start resp}. If the 
retrain encodings do not match, the UCIe Module Partner must resolve according to Retrain 
encodings and resolutions shown in Table 4-10 , Table 4-11 , and Table 4-12  and then send 
{PHYRETRAIN.retrain start resp} with  the resolved retrain encoding.
4. Once a die has sent and received the sideband message {PHYRETRAIN.retrain start resp}, it must 
exit to corresponding training state according to the resolved retrain encoding.
4.5.3.7.4 PHY retrain from LINKSPEED
1. The UCIe Module must send {PHYRETRAIN.retrain start req} with retrain encoding reflecting the 
contents of Runtime Link Test Control register except the Start bit (if the Busy bit in Runtime Link 
Test Status Register is set). Following this, the UCIe Module Partner compares the received retrain 
encoding with the local retrain encoding. If received retrain encoding is the same as the local retrain encoding, the UCIe Module Partner must re spond with {PHYRETRAIN.retrain start resp}. If 
the retrain encodings do not match, the UCIe Mo dule Partner must resolve according to Retrain 
encodings and resolutions shown in Table 4-10 , Table 4-11 , and Table 4-12  and then send 
{PHYRETRAIN.retrain start resp} with  the resolved retrain encoding.
2. Once a die has sent and received the sideband message {PHYRETRAIN.retrain start resp}, it must 
exit to corresponding training state according to the resolved retrain encoding.
4.5.3.8 TRAINERROR
This state used as a transitional state due to any fatal or non-fatal events that need to bring the state machine back to RESET state. This can happen during initialization and training or if “Start UCIe Link 
training” bit from UCIe Link control register is set wh en state machine is not in RESET. It is also used 
for any events that transition the Link from a Link  Up to a Link Down condition. Data, Valid, Clock, 
and Track transmitters are tri-stated, and their receivers are permitted to be disabled.
The exit from TRAINERROR to RESET is implementa tion specific. For cases when there is no error 
escalation (i.e., RDI is not in LinkError), it is recommended to exit TRAINERROR as soon as possible. For cases when there is error escalation (i.e., RDI is in LinkError), it is required for Physical Layer to 
be in TRAINERROR as long as RDI is in LinkErro r. To avoid problems with entering RESET while 
transmitting sideband packets, any in-progress sideband packets must finish transmission before entering RESET state.
See Chapter 10.0  for correctable, non-fatal, and fatal error escalation on RDI.
This state is common for Advanced  Package  and Standard Package  configurations.
If sideband is Active, a sideband handshake must be performed to enter TRAINERROR state from any 
state other than SBINIT. The following is defined as the TRAINERROR handshake:
• The UCIe Module requesting exit to TRAINERRO R must send {TRAINERROR Entry req} sideband 
message and wait for a response. The UCIe Mo dule Partner must exit to TRAINERROR and 
--- Page 74 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 170
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 respond with {TRAINERROR Entry resp}. Once {TRAINERROR Entry resp} sideband message is 
received, the UCIe Module must exit to TRAINERRO R. If no response is received for 8 ms, the 
LTSM transitions to TRAINERROR.
4.5.3.9 L1/L2
PM state allows a lower power state than dynamic clock gating in ACTIVE. Data, Valid, Clock, and 
Track transmitters are tri-stated, and their receivers are permitted to be disabled.
• This state is entered when RDI has transitioned to PM state as described in Chapter 10.0 . The PHY 
power saving features in this state are implementation specific.
• When local Adapter requests Active on RDI or remo te Link partner requests L1 exit the PHY must 
exit to MBTRAIN.SPEEDIDLE. L1 exit is coordi nated with the corresponding L1 state exit 
transitions on RDI.
• When local Adapter requests Active on RDI or remo te Link partner requests L2 exit the PHY must 
exit to RESET. L2 exit is coordinated with th e corresponding L2 state exit transitions on RDI.
4.6 Runtime Recalibration
Track signal can be used by the Receiver to perf orm periodic runtime calibration while in ACTIVE. 
Mainband data must continued to be sampled an d processed (when accompanied by correct valid 
framing) during Runtime Recalibration. For untermina ted Link, when not sending the required pattern 
the Track signal must alternate between being he ld low and held high (for anti aging) across 
consecutive Track recalibration iterations. For a terminated Link, when not sending the required 
pattern, the Track transmitter must go to Hi-Z.
The following sequence is used to request track pattern:
1. The UCIe Module enables the Track signal buff ers on its Receiver and sends a {RECAL.track 
pattern init req} sideband message, and then waits for a response.
2. The UCIe Module Partner sends {RECAL.track pa ttern init resp} and enables its Track signal 
Transmitter (is preconditioned to drive low if ne eded). Following this, the UCIe Module Partner’s 
Track Transmitter starts sending the pattern described in Section 5.5.1 , along with the forwarded 
clock. If the link is in Clock-gated mode, the UC Ie Module Partner should enable the clock and 
manage whether the Link should return to Clock- gated mode after the Track update is complete.
3. The UCIe Module on its Receiver performs the required recalibration and sends the {RECAL.track 
pattern done req} sideband message.
4. Upon receiving this message, the UCIe Module Partner’s Track Transmitter stops sending the 
pattern and sends the {RECAL.track pattern done resp} sideband message.
5. The UCIe Module is permitted to disable the Track Receiver upon receiving the{RECAL.track 
pattern done resp} sideband message.
4.7 Multi-module Link
As described in Chapter 1.0 , the permitted configurations for a multi-module Link are one-, two-, and 
four-module configurations. In a multi-module Link , each module is assigned a dedicated Module 
Identifier (Module ID), which is advertised to the remote Link partner during MBINIT.PARAM. Chapter 5.0  defines the permitted combinations of Module  ID assignments for the different scenarios 
of Multi-module instantiations that must be  supported by multi-module implementations.
--- Page 75 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 171
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.7.1 Multi-module initialization
Each module in a multi-module configuration mu st initialize and train independently, using its 
sideband. If two or four modules are used, a se parate multi-module PHY logic block coordinates 
across the modules, as described in Section 1.2.2 . The MMPL is responsible for orchestrating data 
transfer and any associated byte swizzling for the Transmitters across the multiple modules such that 
the remote Link partner’s Receivers observe the co rrect byte-to-Lane mapping (i.e., for any valid 
transfer, bytes are laid out from LSB to MSB in a scending order of Module ID and Lane ID across all 
the active Lanes). Figure 4-42 , Figure 4-43 , Figure 4-44 , and Figure 4-45  illustrate examples of the 
aforementioned byte swizzling for some of the St andard Package configurations. M0, M1, M2, and M3 
in the figures correspond to Module ID 0, Module ID  1, Module ID 2, and Module ID 3, respectively. 
The figures provide the RDI byte-to-Module mapping. Figure 4-42  shows the scenario in which the 
remote Link partner’s Module ID is the same. Figure 4-43  shows an example of a scenario in which 
the remote Link partner’s Module ID is different. Figure 4-44  shows an example of width degradation 
for Standard package in which the remote Link part ner’s Module ID is different (note that the bytes 
are laid out in ascending order of Module ID and Lane  ID across all the active Lanes at the Receiver in 
all cases). Figure 4-45  shows a scenario in which two modules are disabled. This corresponds to a 
case outlined in Chapter 5.0  in which a stacked configuration is connected with an unstacked 
configuration and the M0 and M2 modules are disa bled; the remaining bytes of RDI are sent over 
subsequent 8-UI intervals such that M1 on the re mote Link partner receives the least significant 
bytes.
Figure 4-42. Example of Byte Ma pping for Matching Module IDs
Figure 4-43. Example of Byte Ma pping for Differing Module IDs

--- Page 76 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 172
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Each module in a multi-module Link must operate at the same width and speed. During initialization 
or retraining, if any module failed to train, the MM PL must ensure that the multi-module configuration 
degrades to the next permitted configuration for width or speed degrade (see Figure 4-46  and 
Figure 4-47 ). Subsequently, any differences in width and speed between the different modules must 
be resolved using the following rules:
1. For Standard package multi-module configuration,  if width degrade is reported for any of the 
modules:
a. If less than or equal to half the number of modules report width degrade at the current Link 
speed, the corresponding Modules must be disa bled. The MMPL must ensure that the multi-
module configuration degrades to the next perm itted configuration for width or speed degrade 
(see Figure 4-46  and Figure 4-47 ). For example, if three out of four modules are active, the 
MMPL must degrade the Link to a two-module configuration.
b. If the majority of modules report width degrade at the current Link speed, see the pseudo code 
below:Figure 4-44. Example of Width Degradation wi th Byte Mapping for Differing Module IDs
Figure 4-45. Example of Byte Mapping with Module Disable
 CLS: Current Link Speed 
CLS-1: Next lower allowed Link Speed 
M is number of active Modules 
Aggregate Raw BW(M, CLS) = Common Minimum Link width * M * CLS If modules report Width degrade: 
 If CLS = 4 GT/s 
  Apply Width degrade for all modules 
Else If Aggregate Raw BW(M, (CLS-1)) > Aggregate raw BW (M/2, CLS): 
  Attempt Speed Degrade 
 Else: 
  Apply Width degrade for all modules 
 
--- Page 77 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 173
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 2. For Advanced or Standard package multi-module  configuration, if any Module reports speed 
difference, see the pseudo code below:
Figure 4-46  and Figure 4-47  provide a consolidated view of the above two rules as a flow chart that 
Advanced Package and Standard Package implementati ons, respectively, must follow. Note that the 
“Yes” condition for HMLS/2 > CMLS question is there to cover the base case of 4 GT/s. In other words, 
if some module(s) passed MBINIT but failed 4 GT/s in LinkSpeed, then the “Yes” arc will result in 
module disable instead of TrainError (because CMLS will be 0 for that) and provide the opportunity to 
remain operational at 4 GT/s for the modules that were still operational at 4 GT/s.
Figure 4-46. Decision Flow Chart for Multi-module Advanced Package IF modules report speed difference: 
 CMLS: Common Maximum Link Speed 
 HMLS: Highest Maximum Link Speed of next lower configuration  IF HMLS/2 > CMLS:   Modules degrade to next lower configuration 
 Else: 
  Speed for all modules degrades to CMLS 
LinkSpeed 
Any enabled 
modul e re porti ng 
errors?LinkInit
All Modules with 
erro rs r epairable?NO
YesYesModules with errors 
disabled to reach next 
lower module count 
configuration
Speed degrade
all modulesRepair
HMLS/2 > 
CMLS? YesSpeedidle
Some modules will report speed degrade
NoOperational Modules Transition to LINKINIT
Less than or 
equal to half modules 
report error and errors are 
unrepairable and no speed 
degrade possible
Modules reporting speed 
degrade disabled to reach 
next lower module count 
configurationTRAINERRORAny modules with an 
op eratio nal co nfiguration ?11
NoYes
--- Page 78 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 174
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.7.1.1 Sideband Assignment and Re timer Credits for Multi-module 
Configurations
During Link initialization, training and retraining (see Section 4.5 ) certain sideband packets are sent 
on individual module sideband interfaces. These include all the messages in Table 7-9  and Table 7-11 , 
and any vendor-defined messages that were defined as such.
Other sideband packets use a single sideband to send sideband packets. These include Register 
Access packets (requests as well as completions), all the non-vendor defined messages in Table 7-8  
and Table 7-10 , and any vendor-defined messages that were defined as such. A device must send 
these sideband packets on the sideband interface of  the numerically least Module ID whose LTSM is 
not in RESET or SBINIT. A packet sent on a given Module ID could be received on a different Module 
ID on the sideband Receiver.
Similarly, Retimer credits are returned on the Valid  signal of the numerically least Module ID whose 
LTSM is in Active state. Credits sent on a given Mo dule ID could be received on a different Module ID 
on the remote Link partner.
4.7.1.2 Examples of MMPL Synchronization
When a module is part of a multi-module UCIe Li nk, it performs individual training steps through 
Step 2  of MBTRAIN.LINKSPEED independent of other mo dules using its own sideband Link. This is 
true for both Link Initialization and Link Retr aining. The common Link parameters exchanged in 
MBINIT.PARAM are the same for all modules that are part of the multi-module Link (for example the 
“Maximum Data Rate”). Thus, when in MBTRAIN.LI NKSPEED, all modules of a multi-module Link are 
operating at the same data rate.
The synchronization orchestration by MMPL happen s in the MBTRAIN.LINKSPEED state based on the 
rules outlined in Section 4.7.1 . As outlined in Section 4.5.3.4.12 , after Step 2  of MBTRAIN.LINKSPEED 
has completed and PHY_IN_RETRAIN is not set:Figure 4-47. Decision Flow Chart fo r Multi-module Standard Package
LinkSpeed 
Any enabled 
module reporting 
errors?LINKINIT
Yes
More than half number of modules 
report errors and all modules with 
errors report width degradeNO
YesModules with errors 
disabled to reach next 
lower module count 
configuration
BW(M, (C LS-1)) >  
BW (M/2, CLS) ?No
Speed degrade 
all operational 
modulesWidth 
DegradeNo
HMLS/2 > 
CMLS?YesThis arc implies at least one 
module reported speed 
degradeSpeedidle
YesOperational Modules 
Transition to 
LINK INIT
Le ss than or equal  to half 
number of modules report err or 
and all modules with errors 
report width degradeNo
NoModules reporting speed 
degrade disabled to reach 
next lower module count 
configurationTRAINERRORAny modules with an 
operational configuration ?11
NoYes
--- Page 79 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 175
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 • If no errors are encountered for a module, an {MBTRAIN.LINKSPEED done req} is sent to the 
remote Link partner module
• If errors are encountered for a module , an {MBTRAIN.LINKSPEED error req}/ 
{MBTRAIN.LINKSPEED error resp} handshake is performed followed by sending an 
{MBTRAIN.LINKSPEED exit to repair req} or an {MBTRAIN.LINKSPEED exit to speed degrade req} 
on that module’s sideband.
The individual modules notify the MMPL of the se nt and received information from these sideband 
messages. MMPL collects this information from all the modules which are operational in the Link and 
determines the next state based on re solution of the rules outlined in Section 4.7.1 . Of course, the 
case without errors is when all modules sent and received the {MBTRAIN.LINKSPEED done req} 
message with no change to Link width. In this  scenario, the MMPL directs them to proceed to Step 6  
of MBTRAIN.LINKSPEED.
The following sections cover a few examples of th is resolution for a Link with four modules and 
Standard Package configuration where errors were encountered.
4.7.1.2.1 Example 1: MMPL Resolutio n results in a Width Degrade per Module
In this example, the four modules of the UCIe Link are in MBTRAIN.LINKSPEED at 8 GT/s. Table 4-13  
shows the exchanged messages for one die (in the case  where errors are encountered, it is assumed 
that the {MBTRAIN.LINKSPEED error req}/ {MBTRA IN.LINKSPEED error resp } has completed before 
the messages shown). Because the resolution is cons istent in using the sent and received messages, 
both die of the Link will reach the same resolution.
In this example, 3 out of the 4 modules have eith er sent or received the {MBTRAIN.LINKSPEED exit 
to repair req} message which indicate a width degrade for Standard Pack age configurations. The 
value of “CLS” (Current Link Speed ) is 8 GT/s, and the value of “CLS -1” is 4 GT/s. The value of “M” 
(Number of Active Modules) is 4. Because BW (4 Links at 4 GT/s) is not greater than BW (2 Links at 8 
GT/s), the flow chart in Figure 4-46  would result in the MMPL notifying all the modules to proceed 
with a width degrade by moving to MBTRAIN.REPAIR  as the next state (i.e., {MBTRAIN.LINKSPEED 
exit to repair resp} will be sent on each Module).  Note that “CLS” and “M” are re-computed using the 
updated information every time the Link is MBTR AIN.LINKSPEED and there is  a corresponding MMPL 
resolution. Width degrade is applied per module following the steps in MBTRAIN.REPAIR for every 
module in this UCIe Link. For the module where no errors were encountered, the transmitter is 
permitted to pick either of Lanes 0 to 7 or Lanes 8 to 15 as the operational Lanes when transmitting 
the {MBTRAIN.REPAIR apply degrade req} to the remo te Link partner module. Following the exit from 
MBTRAIN.REPAIR, the training continues through the substates of MBTRAIN and in the next iteration 
of MBTRAIN.LINKSPEED, if no errors are encount ered, MMPL will direct the modules to proceed to 
Step 6  of MBTRAIN.LINKSPEED.
Note that this example is covering the case where errors occurred during the LINKSPEED state. If the 
width of a module is already lower from the rest of  the operational modules that are part of a multi-
module Link (e.g., if a module had degraded width during MBINIT.REPAIRMB itself), it may have sent 
and received {MBTRAIN.LINKSPEED done req} duri ng LINKSPEED. However, from a MMPL resolution Table 4-13. Messages exchanged that are used  to determine resolution for Example 1
Module Identifier Sent Message Received Message
Module 0 {MBTRAIN.LINKSPEED done req} {MBTRAIN.LINKSPEED done req}
Module 1 {MBTRAIN.LINKSPEED exit to repair req} {MBTRAIN.LINKSPEED done req}
Module 2 {MBTRAIN.LINKSPEED done req} {M BTRAIN.LINKSPEED exit to repair req}
Module 3 {MBTRAIN.LINKSPEED exit to repair req} {MBTRAIN.LINKSPEED exit to repair req}
--- Page 80 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 176
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 perspective, MMPL must treat this as a Module re porting errors requiring width degrade. This is 
because a multi-module Link requires all modu les to operate at the same width and speed.
4.7.1.2.2 Example 2: MMPL Resolution results in a Speed Degrade
In this example, the four modules of the UCIe  Link are in MBTRAIN.LINKSPEED at 16 GT/s. Table 4-14  
shows the exchanged messages for one die (in the case  where errors are encountered, it is assumed 
that the {MBTRAIN.LINKSPEED error req}/ {MBTRA IN.LINKSPEED error resp } has completed before 
the messages shown). Because the resolution is cons istent in using the sent and received messages, 
both die of the Link will reach the same resolution. 
In this example, Module 3 has received a message indicating that the remote partner wants to speed 
degrade. “CMLS” always maps to the next degraded Link speed and so in this case “CMLS” is 12 GT/s. “HMLS” always ends up mapping to current Link sp eed and so in this case it is 16 GT/s. Because 
Module 3 received a speed degrade re quest, following the flow chart in Figure 4-47 , this would result 
in MMPL notifying all the modules to proc eed with a speed degrade by moving to 
MBTRAIN.SPEEDIDLE (i.e. {MBTRAIN.LINKSPEED exit to speed degrade resp} will be sent on each 
Module). Following the exit from MBTRAIN.SPEEDID LE, the training continues through the substates 
of MBTRAIN and in the next iteration of MBTRAIN.LI NKSPEED, if no errors are encountered, MMPL will 
direct the modules to proceed to Step 6  of MBTRAIN.LINKSPEED. Note that “CMLS” and “HMLS” are 
using the updated information every time the Link is MBTRAIN.LINKSPEED and there is a 
corresponding MMPL resolution. In this example, for the next iteration, CMLS will be 8 GT/s and HMLS 
will be 12 GT/s.
4.7.1.2.3 Example 3: MMPL Resolution results in a Module Disable
In this example, the four modules of the UCIe  Link are in MBTRAIN.LINKSPEED at 16 GT/s. Table 4-15  
shows the exchanged messages for one die (in the case  where errors are encountered, it is assumed 
that the {MBTRAIN.LINKSPEED error req}/ {MBTRA IN.LINKSPEED error resp } has completed before 
the messages shown). Because the resolution is cons istent in using the sent and received messages, 
both die of the Link will reach the same resolution.
Because less than half of the modules are reporting errors and requesting a width degrade, as per the 
flow chart in Figure 4-47 , MMPL would take the configuration to a two module configuration. As per 
the rules in Section 5.7.3.4.1 , Module 0 and Module 1 would send the {MBTRAIN.LINKSPEED multi-
module disable module resp} to take these mo dules to TRAINERROR and RESET. Module 2 and 
Module 3 would send the {MBTRAIN.LINKSPEED  done resp} to take them to LINKINIT.Table 4-14. Messages exchanged that are used  to determine resolution for Example 2
Module Identifier Sent Message Received Message
Module 0 {MBTRAIN.LINKSPEED exit to repair req} {MBTRAIN.LINKSPEED done req}
Module 1 {MBTRAIN.LINKSPEED done req} {MBTRAIN.LINKSPEED done req}
Module 2 {MBTRAIN.LINKSPEED done req} {MBTRAIN.LINKSPEED done req}
Module 3 {MBTRAIN.LI NKSPEED done req}{MBTRAIN.LINKSPEED  exit to speed 
degrade req}
Table 4-15. Messages exchanged that are used  to determine resolution for Example 3
Module Identifier Sent Message Received Message
Module 0 {MBTRAIN.LINKSPEED done req} {MBTRAIN.LINKSPEED done req}
Module 1 {MBTRAIN.LINKSPEED exit to repair req} {MBTRAIN.LINKSPEED done req}
Module 2 {MBTRAIN.LINKSPEED done req} {MBTRAIN.LINKSPEED done req}
Module 3 {MBTRAIN.LINKSPEED done req} {MBTRAIN.LINKSPEED done req}
--- Page 81 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 177
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 4.7.2 Multi-module Interoperability  between x64 and x32 Advanced 
Packages
MMPL is responsible for the appropriate byte swiz zling and width adjustment when a multi-module 
x64 Advanced Package module is connected to a corresponding multi-module x32 Advanced Package 
module. All the modules in a multi-module configuration must be of the same type (in this context, all 
the modules within a multi-module set must be x64 Advanced or x32 Advanced). All the rules related 
to module naming conventions and disabled config urations apply to x32 Advanced Package Modules 
as well.
One example of interoperation between UCIe-A x6 4 and UCIe-A x32 is when the UCIe-A x64 Stack 
(including RDI and FDI maximum throughput) is bandwidth-matched (Full Width Mode) by the remote 
Link partner’s maximum throughput for a given interface. Figure 4-48  shows an example of two x64 
modules that are capable of operating as two inde pendent UCIe stacks with independent Adapters 
and Protocol Layers (bypass MMPL  logic in configuration (a) in Figure 4-48 ) and is also capable of 
operating as a multi-module configuration when  connected to a corresponding multi-module 
configuration of x32 Advanced Package to achieve the equivalent bandwidth of a single x64 module 
(configuration (b) in Figure 4-48 ). In the latter configuration, one of the Adapters (shown in gray) is 
disabled.
Software and firmware are permitted to use UCIe DVSEC Link Capability and Control registers to 
determine within which configuration to train the link.
Another example of interoperation between UCIe-A  x64 and UCIe-A x32 is when the UCIe-A x64 
Stack degrades bandwidth (Degraded Width Mode) to match the remote Link partner’s maximum 
throughput. Figure 4-49  shows an example of RDI byte-to-modu le assignments for a four-module set 
of x64 Advanced Package modules interoperating with a four-module set of x32 Advanced Package 
modules. The example is for a 256B RDI width on th e x64 set, and a 128B RDI on the x32 set. On the 
Transmitter side of x64 modules, the MMPL throttl es RDI, as required, because the MMPL can only 
send half the bytes over 8 UI; and on the Receiver side, the MMPL accumulates 16 UI worth of data 
before forwarding it over RDI (assumes data transf ers are in chunks of 256B OR appropriate pause of 
data stream indications are applied and detected  by MMPLs/Adapters within the data stream).Figure 4-48. Implementation Example Sh owing Two Different Operating Modes 
of the Same Hardware Implementation
Die-to-Die
Adapter
RDI
Physical Lay er
(x64 module)
AF EDie-to-Die
Adapter
Physical Lay er
(x64 module)
AF EDie-to-Die
Adapter
RDI
Multi-module PHY Logic
(two x64 modules operating in x32 mode)
Module 0 AFE/PHY Log ic Module 1 AFE/PHY Log icDie-to-Die
Adapter
(a) (b)Two D2D stacks enabled; MMPL bypassed and each stack uses 
one module and operates in Full Width mode
For each stack, Only one D2D stack enabled; Uses MMPL with two modules and 
operates in Full Width mode
Max Link Width x64
APMW 0
Link Training Parameter UCIe-A x32 0UCIe Link DVSEC 
Capability RegisterMax Link Width x64
APMW 1
Link Training Parameter UCIe-A x32 1UCIe Link DVSEC 
Capability Register
--- Page 82 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 178
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 For the example shown in Figure 4-49 , a single Adapter is operating with all four Modules. The D2D 
stack uses MMPL with 4 modules, with each of th e x64 modules operating in Degraded Width Mode, 
and only 32 lanes routed per module. The correspondi ng values in the capability register and Link 
Training parameter are as listed in Table 4-16 .
See Section 5.7.2.4  for comprehensive rules of interope ration between x64 and x32 Advanced 
Package modules.
4.8 Sideband PHY Arbitration between MPMs and Link 
Management Packets
While the exact arbitration policy is implementation specific, care should be taken to avoid delaying 
transmitting any pending link management packets for extended lengths of time potentially causing 
timeouts. See Section 8.2.5.1.2  for length restriction on MPMs with Data that allows for PHY 
arbitration to provide an upper bound on the amount of delay to send a link management packet or a 
higher-priority MPM packet that might be waiting be hind an MPM with Data packet. Additionally, PHY 
transmitter must fully complete transmission of a MPM with Data within 512 UI max (when Sideband 
Performant Mode Operation is negotiated) and 768 UI max (when Sideband Performant Mode Figure 4-49. RDI Byte-to-Module Assignme nt Example for x64 Interop with x32
Table 4-16. Capability Register and Link Training Parameter Values 
for RDI Byte-to-Module Assignment Example for x64 Interop with x32
UCIe Link DVSEC Capability 
RegisterMax Link Width x128
APMW 1
Link Training Parameter UCIe-A x32 1

--- Page 83 ---
Logical Physical Layer
UCIe Specification Revision 2.0, Version 1.0 179
August 6, 2024 Property of Universal Chiplet In terconnect Express (UCIe) © 2022–2024 Operation is not negotiated). See Section 4.1.5  for details of sideband transmission UI notation. See 
Section 4.1.5.1  for Performant Mode Operation (PMO) details.
Figure 4-50  and Figure 4-51  show the arbitration at the PHY.
§ §Figure 4-50. Example of Encapsulated MTPs Transmitted on Sideband Link 
without Sideband PMO
Figure 4-51. Example of a Large Management  Packet Split into Two Encapsulated 
MTPs, with No Segmentation, No Sideband PMO, and with 
Two Link Management Packets between the Two Encapsulated MTPs64 UI 32 UIIDLE IDLE
64 UI 32 UI 64 UI
TimeEncapsulated 
MTP Payload1 Encapsulated MTP with 
maximum payload length of 
7 QWORDs sent over 768 UIA “Link Management” packet can be sent 
here by arbiter, if pending, or another 
Encapsulated MTP can start here
Encapsulated 
MTP HeaderEncapsulated 
MTP Header
64 UI 32 UIIDLE IDLE
64 UI 32 UI 64 UI
Time1st Encapsulated MTP from a large 
Management PacketLink Management Msg with Data
Link Mgmt 
Msg 
HeaderIDLE
64 UI 32 UIIDLE
32 UI 64 UIIDLE
32 UI 64 UIIDLE
32 UI 64 UI 32 UIIDLE Link Mgmt 
MsgD 
HeaderLink Mgmt 
MsgD 
PayloadLink Management Msg without Data2nd Encapsulated MTP from the same 
large Management Packet starts here...
Encapsulated 
MTP HeaderEncapsulated 
MTP Payload
QWORD 0Encapsulated 
MTP Payload
QWORD 6Encapsulated 
MTP Header